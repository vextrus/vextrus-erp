
> finance@0.0.1 test
> jest

PASS src/domain/value-objects/__tests__/tin.value-object.spec.ts (15.329 s)
PASS src/application/commands/__tests__/create-invoice.command.spec.ts (15.349 s)
PASS src/application/commands/__tests__/cancel-invoice.command.spec.ts (15.448 s)
PASS src/application/commands/__tests__/approve-invoice.command.spec.ts (15.562 s)
PASS src/domain/value-objects/__tests__/bin.value-object.spec.ts (15.658 s)
PASS src/domain/value-objects/__tests__/invoice-number.value-object.spec.ts (15.786 s)
FAIL src/domain/aggregates/invoice/invoice.aggregate.spec.ts (16.01 s)
  ● Invoice Aggregate › Event Sourcing › should increment version for each event

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 853 |[39m       [90m// Assert[39m
     [90m 854 |[39m       [90m// Version increases with each applied event[39m
    [31m[1m>[22m[39m[90m 855 |[39m       expect(invoice[33m.[39mversion)[33m.[39mtoBeGreaterThan(initialVersion)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 856 |[39m     })[33m;[39m
     [90m 857 |[39m   })[33m;[39m
     [90m 858 |[39m[0m

      at Object.<anonymous> (domain/aggregates/invoice/invoice.aggregate.spec.ts:855:31)

FAIL src/domain/aggregates/payment/payment.aggregate.spec.ts (16.189 s)
  ● Payment Aggregate › Payment Reversal › should throw error when reversing failed payment

    Cannot fail payment in COMPLETED status

    [0m [90m 437 |[39m   fail(reason[33m:[39m string)[33m:[39m [36mvoid[39m {
     [90m 438 |[39m     [36mif[39m ([36mthis[39m[33m.[39mstatus [33m!==[39m [33mPaymentStatus[39m[33m.[39m[33mPENDING[39m [33m&&[39m [36mthis[39m[33m.[39mstatus [33m!==[39m [33mPaymentStatus[39m[33m.[39m[33mPROCESSING[39m) {
    [31m[1m>[22m[39m[90m 439 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Cannot fail payment in ${this.status} status`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 440 |[39m     }
     [90m 441 |[39m
     [90m 442 |[39m     [36mthis[39m[33m.[39mapply([36mnew[39m [33mPaymentFailedEvent[39m([0m

      at Payment.fail (domain/aggregates/payment/payment.aggregate.ts:439:13)
      at Object.<anonymous> (domain/aggregates/payment/payment.aggregate.spec.ts:815:15)

  ● Payment Aggregate › Event Sourcing › should increment version for each event

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 924 |[39m
     [90m 925 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 926 |[39m       expect(payment[33m.[39mversion)[33m.[39mtoBeGreaterThan(initialVersion)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 927 |[39m     })[33m;[39m
     [90m 928 |[39m   })[33m;[39m
     [90m 929 |[39m[0m

      at Object.<anonymous> (domain/aggregates/payment/payment.aggregate.spec.ts:926:31)

  ● Payment Aggregate › Multi-Tenancy › should include tenant ID in all events

    Cannot fail payment in COMPLETED status

    [0m [90m 437 |[39m   fail(reason[33m:[39m string)[33m:[39m [36mvoid[39m {
     [90m 438 |[39m     [36mif[39m ([36mthis[39m[33m.[39mstatus [33m!==[39m [33mPaymentStatus[39m[33m.[39m[33mPENDING[39m [33m&&[39m [36mthis[39m[33m.[39mstatus [33m!==[39m [33mPaymentStatus[39m[33m.[39m[33mPROCESSING[39m) {
    [31m[1m>[22m[39m[90m 439 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Cannot fail payment in ${this.status} status`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 440 |[39m     }
     [90m 441 |[39m
     [90m 442 |[39m     [36mthis[39m[33m.[39mapply([36mnew[39m [33mPaymentFailedEvent[39m([0m

      at Payment.fail (domain/aggregates/payment/payment.aggregate.ts:439:13)
      at Object.<anonymous> (domain/aggregates/payment/payment.aggregate.spec.ts:945:15)

FAIL src/domain/aggregates/journal/journal-entry.aggregate.spec.ts (16.2 s)
  ● JournalEntry Aggregate › Journal Entry Creation › should create a journal entry with correct initial state

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:23:36)

  ● JournalEntry Aggregate › Journal Entry Creation › should calculate fiscal period correctly for Bangladesh

    Date 2024-07-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:34:40)

  ● JournalEntry Aggregate › Journal Entry Creation › should generate correct journal number prefix by type

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:50:43)

  ● JournalEntry Aggregate › Double-Entry Validation › should validate balanced journal entries

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:67:36)

  ● JournalEntry Aggregate › Double-Entry Validation › should reject unbalanced journal entries

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:89:36)

  ● JournalEntry Aggregate › Double-Entry Validation › should require at least two journal lines

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:110:36)

  ● JournalEntry Aggregate › Double-Entry Validation › should handle complex multi-line entries

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:124:36)

  ● JournalEntry Aggregate › Journal Line Validation › should reject lines with both debit and credit amounts

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:158:36)

  ● JournalEntry Aggregate › Journal Line Validation › should reject lines with zero amounts

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:171:36)

  ● JournalEntry Aggregate › Journal Line Validation › should accept lines with only debit amount

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:184:36)

  ● JournalEntry Aggregate › Journal Line Validation › should accept lines with only credit amount

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:198:36)

  ● JournalEntry Aggregate › Journal Posting › should post a balanced journal entry

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:214:36)

  ● JournalEntry Aggregate › Journal Posting › should not allow posting unbalanced entries

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:236:36)

  ● JournalEntry Aggregate › Journal Posting › should not allow posting already posted journals

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:255:36)

  ● JournalEntry Aggregate › Reversing Entries › should create a reversing entry with swapped debits and credits

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:276:36)

  ● JournalEntry Aggregate › Reversing Entries › should not allow reversing unposted journals

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:309:36)

  ● JournalEntry Aggregate › Reversing Entries › should reject reversing date in closed period

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:328:36)

  ● JournalEntry Aggregate › Cost Center and Project Tracking › should track cost centers in journal lines

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:352:36)

  ● JournalEntry Aggregate › Cost Center and Project Tracking › should track tax codes in journal lines

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:374:36)

  ● JournalEntry Aggregate › Auto-Post Feature › should auto-post journal if requested and balanced

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:417:36)

  ● JournalEntry Aggregate › Auto-Post Feature › should not auto-post unbalanced journal

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:439:36)

FAIL src/domain/aggregates/chart-of-account/chart-of-account.aggregate.spec.ts (16.288 s)
  ● ChartOfAccount Aggregate › Event Sourcing › should increment version for each event

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 722 |[39m
     [90m 723 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 724 |[39m       expect(account[33m.[39mversion)[33m.[39mtoBeGreaterThan(initialVersion)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 725 |[39m     })[33m;[39m
     [90m 726 |[39m   })[33m;[39m
     [90m 727 |[39m[0m

      at Object.<anonymous> (domain/aggregates/chart-of-account/chart-of-account.aggregate.spec.ts:724:31)

  ● ChartOfAccount Aggregate › Multi-Tenancy › should include tenant ID in all events

    Cannot deactivate account with non-zero balance

    [0m [90m 276 |[39m
     [90m 277 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mbalance[33m.[39misZero()) {
    [31m[1m>[22m[39m[90m 278 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Cannot deactivate account with non-zero balance'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 279 |[39m     }
     [90m 280 |[39m
     [90m 281 |[39m     [36mthis[39m[33m.[39mapply([36mnew[39m [33mAccountDeactivatedEvent[39m([0m

      at ChartOfAccount.deactivate (domain/aggregates/chart-of-account/chart-of-account.aggregate.ts:278:13)
      at Object.<anonymous> (domain/aggregates/chart-of-account/chart-of-account.aggregate.spec.ts:743:15)

FAIL src/application/services/__tests__/performance-benchmarks.spec.ts
  ● Test suite failed to run

    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m108[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'date' does not exist on type 'ExtractedInvoiceData'.

    [7m108[0m       expect(result.date).toBe('2024-10-16');
    [7m   [0m [91m                    ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m112[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'customerTin' does not exist on type 'ExtractedInvoiceData'.

    [7m112[0m       expect(result.customerTin).toBe('987654321098');
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m118[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'musahkCompliant' does not exist on type 'ExtractedInvoiceData'.

    [7m118[0m       expect(result.musahkCompliant).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m146[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'loadLanguage' does not exist on type 'Mocked<Worker>'.

    [7m146[0m       expect(mockWorker.loadLanguage).toHaveBeenCalledWith('eng+ben');
    [7m   [0m [91m                        ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m147[0m:[93m25[0m - [91merror[0m[90m TS2551: [0mProperty 'initialize' does not exist on type 'Mocked<Worker>'. Did you mean 'reinitialize'?

    [7m147[0m       expect(mockWorker.initialize).toHaveBeenCalledWith('eng+ben');
    [7m   [0m [91m                        ~~~~~~~~~~[0m

      [96m../../node_modules/.pnpm/tesseract.js@5.1.1/node_modules/tesseract.js/src/index.d.ts[0m:[93m23[0m:[93m5[0m
        [7m23[0m     reinitialize(langs?: string | Lang[], oem?: OEM, config?: string | Partial<InitOptions>, jobId?: string): Promise<ConfigResult>
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        'reinitialize' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m215[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'warnings' does not exist on type 'ExtractedInvoiceData'.

    [7m215[0m       expect(result.warnings).toContain('Low OCR confidence detected. Manual review recommended.');
    [7m   [0m [91m                    ~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m237[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'customerTin' does not exist on type 'ExtractedInvoiceData'.

    [7m237[0m       expect(result.customerTin).toMatch(/^\d{10,12}$/);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m238[0m:[93m21[0m - [91merror[0m[90m TS2551: [0mProperty 'validations' does not exist on type 'ExtractedInvoiceData'. Did you mean 'validation'?

    [7m238[0m       expect(result.validations.tinValid).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m

      [96msrc/application/services/ocr-invoice-processor.service.ts[0m:[93m27[0m:[93m3[0m
        [7m27[0m   validation: ValidationResult;
        [7m  [0m [96m  ~~~~~~~~~~[0m
        'validation' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m256[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ExtractedInvoiceData'.

    [7m256[0m       expect(result.errors).toContain('Invalid TIN format. Must be 10-12 digits.');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m257[0m:[93m21[0m - [91merror[0m[90m TS2551: [0mProperty 'validations' does not exist on type 'ExtractedInvoiceData'. Did you mean 'validation'?

    [7m257[0m       expect(result.validations.tinValid).toBe(false);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m

      [96msrc/application/services/ocr-invoice-processor.service.ts[0m:[93m27[0m:[93m3[0m
        [7m27[0m   validation: ValidationResult;
        [7m  [0m [96m  ~~~~~~~~~~[0m
        'validation' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m276[0m:[93m21[0m - [91merror[0m[90m TS2551: [0mProperty 'validations' does not exist on type 'ExtractedInvoiceData'. Did you mean 'validation'?

    [7m276[0m       expect(result.validations.binValid).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m

      [96msrc/application/services/ocr-invoice-processor.service.ts[0m:[93m27[0m:[93m3[0m
        [7m27[0m   validation: ValidationResult;
        [7m  [0m [96m  ~~~~~~~~~~[0m
        'validation' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m295[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'musahkCompliant' does not exist on type 'ExtractedInvoiceData'.

    [7m295[0m       expect(result.musahkCompliant).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m296[0m:[93m21[0m - [91merror[0m[90m TS2551: [0mProperty 'validations' does not exist on type 'ExtractedInvoiceData'. Did you mean 'validation'?

    [7m296[0m       expect(result.validations.musahkCompliant).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m

      [96msrc/application/services/ocr-invoice-processor.service.ts[0m:[93m27[0m:[93m3[0m
        [7m27[0m   validation: ValidationResult;
        [7m  [0m [96m  ~~~~~~~~~~[0m
        'validation' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m351[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'category' does not exist on type 'CodedLineItem'.

    [7m351[0m       expect(result.lineItems[0].category).toBe('Supplies');
    [7m   [0m [91m                                 ~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m354[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'category' does not exist on type 'CodedLineItem'.

    [7m354[0m       expect(result.lineItems[1].category).toBe('Supplies');
    [7m   [0m [91m                                 ~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m357[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'category' does not exist on type 'CodedLineItem'.

    [7m357[0m       expect(result.lineItems[2].category).toBe('Supplies');
    [7m   [0m [91m                                 ~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m495[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ExtractedInvoiceData'.

    [7m495[0m       expect(result.errors).toContain('Missing required field: Invoice Number');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m496[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ExtractedInvoiceData'.

    [7m496[0m       expect(result.errors).toContain('Missing required field: Vendor Name');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m497[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ExtractedInvoiceData'.

    [7m497[0m       expect(result.errors).toContain('Missing required field: Total Amount');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m553[0m:[93m51[0m - [91merror[0m[90m TS2339: [0mProperty 'frequency' does not exist on type 'JournalEntry'.

    [7m553[0m       const weeklyEntries = entries.filter(e => e.frequency === 'WEEKLY');
    [7m   [0m [91m                                                  ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m557[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'nextOccurrence' does not exist on type 'JournalEntry'.

    [7m557[0m         expect(entry.nextOccurrence).toBeDefined();
    [7m   [0m [91m                     ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m558[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'lastProcessed' does not exist on type 'JournalEntry'.

    [7m558[0m         expect(entry.lastProcessed).toBeDefined();
    [7m   [0m [91m                     ~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m565[0m:[93m52[0m - [91merror[0m[90m TS2339: [0mProperty 'frequency' does not exist on type 'JournalEntry'.

    [7m565[0m       const monthlyEntries = entries.filter(e => e.frequency === 'MONTHLY');
    [7m   [0m [91m                                                   ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m569[0m:[93m41[0m - [91merror[0m[90m TS2339: [0mProperty 'nextOccurrence' does not exist on type 'JournalEntry'.

    [7m569[0m         const nextDate = new Date(entry.nextOccurrence);
    [7m   [0m [91m                                        ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m580[0m:[93m47[0m - [91merror[0m[90m TS2339: [0mProperty 'nextOccurrence' does not exist on type 'JournalEntry'.

    [7m580[0m         const nextOccurrence = new Date(entry.nextOccurrence);
    [7m   [0m [91m                                              ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m605[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m605[0m           .filter(line => line.type === 'DEBIT')
    [7m   [0m [91m                               ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m606[0m:[93m45[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m606[0m           .reduce((sum, line) => sum + line.amount, 0);
    [7m   [0m [91m                                            ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m609[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m609[0m           .filter(line => line.type === 'CREDIT')
    [7m   [0m [91m                               ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m610[0m:[93m45[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m610[0m           .reduce((sum, line) => sum + line.amount, 0);
    [7m   [0m [91m                                            ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m644[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'method' does not exist on type 'JournalEntry'.

    [7m644[0m       const straightLineEntries = entries.filter(e => e.method === 'STRAIGHT_LINE');
    [7m   [0m [91m                                                        ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m647[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'asset' does not exist on type 'JournalEntry'.

    [7m647[0m         const asset = entry.asset;
    [7m   [0m [91m                            ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m651[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m651[0m         const depreciationAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                           ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m651[0m:[93m79[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m651[0m         const depreciationAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                                              ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m660[0m:[93m61[0m - [91merror[0m[90m TS2339: [0mProperty 'method' does not exist on type 'JournalEntry'.

    [7m660[0m       const decliningBalanceEntries = entries.filter(e => e.method === 'DECLINING_BALANCE');
    [7m   [0m [91m                                                            ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m663[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'asset' does not exist on type 'JournalEntry'.

    [7m663[0m         const asset = entry.asset;
    [7m   [0m [91m                            ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m668[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m668[0m         const depreciationAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                           ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m668[0m:[93m79[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m668[0m         const depreciationAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                                              ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m678[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'asset' does not exist on type 'JournalEntry'.

    [7m678[0m         const asset = entry.asset;
    [7m   [0m [91m                            ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m702[0m:[93m58[0m - [91merror[0m[90m TS2339: [0mProperty 'method' does not exist on type 'JournalEntry'.

    [7m702[0m       const percentageProvisions = entries.filter(e => e.method === 'PERCENTAGE');
    [7m   [0m [91m                                                         ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m705[0m:[93m38[0m - [91merror[0m[90m TS2339: [0mProperty 'baseAmount' does not exist on type 'JournalEntry'.

    [7m705[0m         const expectedAmount = entry.baseAmount * (entry.percentage / 100);
    [7m   [0m [91m                                     ~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m705[0m:[93m58[0m - [91merror[0m[90m TS2339: [0mProperty 'percentage' does not exist on type 'JournalEntry'.

    [7m705[0m         const expectedAmount = entry.baseAmount * (entry.percentage / 100);
    [7m   [0m [91m                                                         ~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m706[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m706[0m         const provisionAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                        ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m706[0m:[93m76[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m706[0m         const provisionAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                                           ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m715[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'method' does not exist on type 'JournalEntry'.

    [7m715[0m       const agingProvisions = entries.filter(e => e.method === 'AGING');
    [7m   [0m [91m                                                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m718[0m:[93m36[0m - [91merror[0m[90m TS2339: [0mProperty 'agingAnalysis' does not exist on type 'JournalEntry'.

    [7m718[0m         const agingBuckets = entry.agingAnalysis;
    [7m   [0m [91m                                   ~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m721[0m:[93m30[0m - [91merror[0m[90m TS7006: [0mParameter 'bucket' implicitly has an 'any' type.

    [7m721[0m         agingBuckets.forEach(bucket => {
    [7m   [0m [91m                             ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m725[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m725[0m         const provisionAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                        ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m725[0m:[93m76[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m725[0m         const provisionAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                                           ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m735[0m:[93m52[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m735[0m         const creditLine = entry.lines.find(l => l.type === 'CREDIT');
    [7m   [0m [91m                                                   ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m752[0m:[93m60[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ date: string; description: string; lines: { accountCode: string; type: string; amount: number; }[]; }' is not assignable to parameter of type 'Partial<JournalEntry>'.
      Types of property 'date' are incompatible.
        Type 'string' is not assignable to type 'Date'.

    [7m752[0m       const entry = await service.createManualJournalEntry(entryData);
    [7m   [0m [91m                                                           ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m770[0m:[93m42[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ date: string; description: string; lines: { accountCode: string; type: string; amount: number; }[]; }' is not assignable to parameter of type 'Partial<JournalEntry>'.
      Types of property 'date' are incompatible.
        Type 'string' is not assignable to type 'Date'.

    [7m770[0m         service.createManualJournalEntry(entryData)
    [7m   [0m [91m                                         ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m785[0m:[93m42[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ date: string; description: string; lines: { accountCode: string; type: string; amount: number; }[]; }' is not assignable to parameter of type 'Partial<JournalEntry>'.
      Types of property 'date' are incompatible.
        Type 'string' is not assignable to type 'Date'.

    [7m785[0m         service.createManualJournalEntry(entryData)
    [7m   [0m [91m                                         ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m814[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m814[0m             .filter(l => l.type === 'DEBIT')
    [7m   [0m [91m                           ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m815[0m:[93m41[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m815[0m             .reduce((sum, l) => sum + l.amount, 0);
    [7m   [0m [91m                                        ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m818[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m818[0m             .filter(l => l.type === 'CREDIT')
    [7m   [0m [91m                           ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m819[0m:[93m41[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m819[0m             .reduce((sum, l) => sum + l.amount, 0);
    [7m   [0m [91m                                        ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m868[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m868[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m874[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksCompleted' does not exist on type 'ClosingResult'.

    [7m874[0m       expect(result.tasksCompleted).toBeGreaterThan(0);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m875[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksSkipped' does not exist on type 'ClosingResult'.

    [7m875[0m       expect(result.tasksSkipped).toBeGreaterThanOrEqual(0);
    [7m   [0m [91m                    ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m883[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m883[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m885[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'executionGroups' does not exist on type 'ClosingResult'.

    [7m885[0m       expect(result.executionGroups).toBeDefined();
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m886[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'executionGroups' does not exist on type 'ClosingResult'.

    [7m886[0m       expect(result.executionGroups.length).toBeGreaterThan(0);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m889[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'executionGroups' does not exist on type 'ClosingResult'.

    [7m889[0m       result.executionGroups.forEach((group, index) => {
    [7m   [0m [91m             ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m889[0m:[93m39[0m - [91merror[0m[90m TS7006: [0mParameter 'group' implicitly has an 'any' type.

    [7m889[0m       result.executionGroups.forEach((group, index) => {
    [7m   [0m [91m                                      ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m889[0m:[93m46[0m - [91merror[0m[90m TS7006: [0mParameter 'index' implicitly has an 'any' type.

    [7m889[0m       result.executionGroups.forEach((group, index) => {
    [7m   [0m [91m                                             ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m906[0m:[93m44[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m906[0m       await service.performContinuousClose(period);
    [7m   [0m [91m                                           ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m927[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m927[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m937[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m937[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m940[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksFailed' does not exist on type 'ClosingResult'.

    [7m940[0m       expect(result.tasksFailed).toBeGreaterThan(0);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m941[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ClosingResult'.

    [7m941[0m       expect(result.errors).toContain('Persistent failure');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m952[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m952[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m955[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ClosingResult'.

    [7m955[0m       expect(result.errors).toContain('Critical reconciliation failure');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m964[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m964[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m967[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksCompleted' does not exist on type 'ClosingResult'.

    [7m967[0m       expect(result.tasksCompleted).toBeGreaterThan(0);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m974[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; status: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; status: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate

    [7m974[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m976[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'periodStatus' does not exist on type 'ClosingResult'.

    [7m976[0m       expect(result.periodStatus).toBe('SOFT_CLOSE');
    [7m   [0m [91m                    ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m982[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'reopenPeriod' does not exist on type 'ContinuousClosingService'.

    [7m982[0m       const reopenResult = await service.reopenPeriod(period);
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m989[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'reopenPeriod' does not exist on type 'ContinuousClosingService'.

    [7m989[0m       await expect(service.reopenPeriod(period)).rejects.toThrow(
    [7m   [0m [91m                           ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1047[0m:[93m62[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m1047[0m         periods.map(period => service.performContinuousClose(period))
    [7m    [0m [91m                                                             ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1065[0m:[93m62[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m1065[0m         periods.map(period => service.performContinuousClose(period))
    [7m    [0m [91m                                                             ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1070[0m:[93m23[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksCompleted' does not exist on type 'ClosingResult'.

    [7m1070[0m         expect(result.tasksCompleted + result.tasksFailed + result.tasksSkipped).toBeGreaterThan(0);
    [7m    [0m [91m                      ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1070[0m:[93m47[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksFailed' does not exist on type 'ClosingResult'.

    [7m1070[0m         expect(result.tasksCompleted + result.tasksFailed + result.tasksSkipped).toBeGreaterThan(0);
    [7m    [0m [91m                                              ~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1070[0m:[93m68[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksSkipped' does not exist on type 'ClosingResult'.

    [7m1070[0m         expect(result.tasksCompleted + result.tasksFailed + result.tasksSkipped).toBeGreaterThan(0);
    [7m    [0m [91m                                                                   ~~~~~~~~~~~~[0m

PASS src/app.controller.spec.ts (17.764 s)
FAIL src/application/services/__tests__/tax-calculation.service.spec.ts (18.162 s)
  ● TaxCalculationService › TDS Calculation › should apply 1.5x rate for vendors without TIN

    expect(received).toBe(expected) // Object.is equality

    Expected: 0.105
    Received: 0.10500000000000001

    [0m [90m  95 |[39m
     [90m  96 |[39m       expect(result[33m.[39mtaxAmount)[33m.[39mtoBe([35m1050[39m)[33m;[39m [90m// 7% * 1.5 = 10.5% of 10000[39m
    [31m[1m>[22m[39m[90m  97 |[39m       expect(result[33m.[39mtaxRate)[33m.[39mtoBe([35m0.105[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m  98 |[39m     })[33m;[39m
     [90m  99 |[39m
     [90m 100 |[39m     it([32m'should calculate TDS for supplier at 4%'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (application/services/__tests__/tax-calculation.service.spec.ts:97:30)

FAIL src/application/services/__tests__/load-testing.service.spec.ts (18.227 s)
  ● LoadTestingService › runLoadTests › should execute all load test scenarios

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runLoadTests › should fail if any scenario fails

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run concurrent users scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run API endpoints scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run database load scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run event processing scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run Bangladesh compliance scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run WebSocket connections scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run cache performance scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run stress test scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should throw error for unknown scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Private Helper Methods › should calculate percentiles correctly

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Private Helper Methods › should calculate average correctly

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Private Helper Methods › should format bytes correctly

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Private Helper Methods › should aggregate metrics from multiple scenarios

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Report Generation › should generate HTML report with results

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Report Generation › should save HTML report to file

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › K6 Script Execution › should execute K6 script successfully

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › K6 Script Execution › should handle K6 script execution errors

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › K6 Results Parsing › should parse K6 results successfully

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › K6 Results Parsing › should handle empty K6 results

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Scenario Configuration › should read configuration values

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Scenario Configuration › should use default values when config not found

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

FAIL src/application/services/__tests__/ocr-invoice-processor.service.spec.ts
  ● Test suite failed to run

    Could not locate the bindings file. Tried:
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\build\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\build\Debug\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\build\Release\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\out\Debug\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\Debug\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\out\Release\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\Release\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\build\default\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\compiled\22.17.0\win32\x64\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\addon-build\release\install-root\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\addon-build\debug\install-root\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\addon-build\default\install-root\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\lib\binding\node-v127-win32-x64\webgl.node

    [0m [90m  6 |[39m [36mimport[39m [33m*[39m [36mas[39m path [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m [36mimport[39m [33m*[39m [36mas[39m brain [36mfrom[39m [32m'brain.js'[39m[33m;[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [36mimport[39m levenshtein [36mfrom[39m [32m'levenshtein'[39m[33m;[39m
     [90m 10 |[39m
     [90m 11 |[39m [36mexport[39m [36minterface[39m [33mExtractedInvoiceData[39m {[0m

      at bindings (../../../node_modules/.pnpm/bindings@1.5.0/node_modules/bindings/bindings.js:126:9)
      at Object.<anonymous> (../../../node_modules/.pnpm/gl@5.0.3/node_modules/gl/src/javascript/native-gl.js:1:40)
      at Object.<anonymous> (../../../node_modules/.pnpm/gl@5.0.3/node_modules/gl/src/javascript/webgl-rendering-context.js:4:58)
      at Object.<anonymous> (../../../node_modules/.pnpm/gl@5.0.3/node_modules/gl/src/javascript/node-index.js:3:48)
      at Object.<anonymous> (../../../node_modules/.pnpm/gl@5.0.3/node_modules/gl/index.js:4:20)
      at Object.<anonymous> (../../../node_modules/.pnpm/gpu.js@2.16.0/node_modules/gpu.js/src/backend/headless-gl/kernel.js:1:20)
      at Object.<anonymous> (../../../node_modules/.pnpm/gpu.js@2.16.0/node_modules/gpu.js/src/gpu.js:5:30)
      at Object.<anonymous> (../../../node_modules/.pnpm/gpu.js@2.16.0/node_modules/gpu.js/src/index.js:1:17)
      at Object.<anonymous> (../../../node_modules/.pnpm/brain.js@2.0.0-beta.24_gpu.js@2.16.0/node_modules/brain.js/dist/index.js:5:14)
      at Object.<anonymous> (application/services/ocr-invoice-processor.service.ts:8:1)
      at Object.<anonymous> (application/services/__tests__/ocr-invoice-processor.service.spec.ts:3:1)

FAIL src/application/services/__tests__/ai-reconciliation.service.spec.ts
  ● Test suite failed to run

    The Node.js native addon module (tfjs_binding.node) can not be found at path: C:\Users\riz\vextrus-erp\node_modules\.pnpm\@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5\node_modules\@tensorflow\tfjs-node\lib\napi-v8\tfjs_binding.node. 
    Please run command 'npm rebuild @tensorflow/tfjs-node --build-addon-from-source' to rebuild the native addon module. 
    If you have problem with building the addon module, please check https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md or file an issue.

    [0m [90m 1 |[39m [36mimport[39m { [33mInjectable[39m[33m,[39m [33mLogger[39m } [36mfrom[39m [32m'@nestjs/common'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 2 |[39m [36mimport[39m [33m*[39m [36mas[39m tf [36mfrom[39m [32m'@tensorflow/tfjs-node'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 3 |[39m [36mimport[39m [33m*[39m [36mas[39m fs [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m 4 |[39m [36mimport[39m [33m*[39m [36mas[39m path [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m 5 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m[0m

      at Object.<anonymous> (../../../node_modules/.pnpm/@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5/node_modules/@tensorflow/tfjs-node/dist/index.js:61:11)
      at Object.<anonymous> (application/services/ai-reconciliation.service.ts:2:1)
      at Object.<anonymous> (application/services/__tests__/ai-reconciliation.service.spec.ts:4:1)

FAIL src/application/services/__tests__/cash-flow-prediction.service.spec.ts
  ● Test suite failed to run

    The Node.js native addon module (tfjs_binding.node) can not be found at path: C:\Users\riz\vextrus-erp\node_modules\.pnpm\@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5\node_modules\@tensorflow\tfjs-node\lib\napi-v8\tfjs_binding.node. 
    Please run command 'npm rebuild @tensorflow/tfjs-node --build-addon-from-source' to rebuild the native addon module. 
    If you have problem with building the addon module, please check https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md or file an issue.

    [0m [90m 1 |[39m [36mimport[39m { [33mInjectable[39m[33m,[39m [33mLogger[39m } [36mfrom[39m [32m'@nestjs/common'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 2 |[39m [36mimport[39m [33m*[39m [36mas[39m tf [36mfrom[39m [32m'@tensorflow/tfjs-node'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 3 |[39m [36mimport[39m [33m*[39m [36mas[39m fs [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m 4 |[39m [36mimport[39m [33m*[39m [36mas[39m path [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m 5 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m[0m

      at Object.<anonymous> (../../../node_modules/.pnpm/@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5/node_modules/@tensorflow/tfjs-node/dist/index.js:61:11)
      at Object.<anonymous> (application/services/cash-flow-prediction.service.ts:2:1)
      at Object.<anonymous> (application/services/__tests__/cash-flow-prediction.service.spec.ts:4:1)

FAIL src/application/services/__tests__/ml-model-management.service.spec.ts
  ● Test suite failed to run

    The Node.js native addon module (tfjs_binding.node) can not be found at path: C:\Users\riz\vextrus-erp\node_modules\.pnpm\@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5\node_modules\@tensorflow\tfjs-node\lib\napi-v8\tfjs_binding.node. 
    Please run command 'npm rebuild @tensorflow/tfjs-node --build-addon-from-source' to rebuild the native addon module. 
    If you have problem with building the addon module, please check https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md or file an issue.

    [0m [90m 2 |[39m [36mimport[39m { [33mConfigService[39m } [36mfrom[39m [32m'@nestjs/config'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m [36mimport[39m [33m*[39m [36mas[39m tf [36mfrom[39m [32m'@tensorflow/tfjs-node'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m [36mimport[39m [33m*[39m [36mas[39m fs [36mfrom[39m [32m'fs/promises'[39m[33m;[39m
     [90m 6 |[39m [36mimport[39m [33m*[39m [36mas[39m path [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m 7 |[39m [36mimport[39m [33m*[39m [36mas[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m[0m

      at Object.<anonymous> (../../../node_modules/.pnpm/@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5/node_modules/@tensorflow/tfjs-node/dist/index.js:61:11)
      at Object.<anonymous> (application/services/ml-model-management.service.ts:4:1)
      at Object.<anonymous> (application/services/__tests__/ml-model-management.service.spec.ts:6:1)

FAIL src/application/services/__tests__/streaming-analytics.service.spec.ts
  ● Test suite failed to run

    The Node.js native addon module (tfjs_binding.node) can not be found at path: C:\Users\riz\vextrus-erp\node_modules\.pnpm\@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5\node_modules\@tensorflow\tfjs-node\lib\napi-v8\tfjs_binding.node. 
    Please run command 'npm rebuild @tensorflow/tfjs-node --build-addon-from-source' to rebuild the native addon module. 
    If you have problem with building the addon module, please check https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md or file an issue.

    [0m [90m 3 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m
     [90m 4 |[39m [36mimport[39m { [33mKafka[39m[33m,[39m [33mConsumer[39m[33m,[39m [33mProducer[39m[33m,[39m [33mEachMessagePayload[39m[33m,[39m [33mKafkaMessage[39m } [36mfrom[39m [32m'kafkajs'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 5 |[39m [36mimport[39m [33m*[39m [36mas[39m tf [36mfrom[39m [32m'@tensorflow/tfjs-node'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 6 |[39m [36mimport[39m { performance } [36mfrom[39m [32m'perf_hooks'[39m[33m;[39m
     [90m 7 |[39m
     [90m 8 |[39m [36minterface[39m [33mFinancialEvent[39m {[0m

      at Object.<anonymous> (../../../node_modules/.pnpm/@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5/node_modules/@tensorflow/tfjs-node/dist/index.js:61:11)
      at Object.<anonymous> (application/services/streaming-analytics.service.ts:5:1)
      at Object.<anonymous> (application/services/__tests__/streaming-analytics.service.spec.ts:4:1)

ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\cache\dist\index.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\cache\dist\index.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\infrastructure\dist\index.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\cache\dist\cache.service.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\cache\dist\cache.service.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\cache\dist\cache.service.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\cache\dist\cache.interceptor.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
FAIL src/application/services/__tests__/migration.service.spec.ts (19.237 s)
  ● MigrationService › generateMigrationScripts › should generate all migration scripts

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should include finance schema creation

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should create all required tables

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should include Bangladesh-specific types

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should create necessary indexes

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should implement Row Level Security

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › executeMigration › should execute migration successfully

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › executeMigration › should rollback on error

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › executeMigration › should support dry run mode

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › executeMigration › should skip validation when requested

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › validateMigration › should validate all tables exist

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › validateMigration › should detect missing required columns

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › validateMigration › should detect missing indexes

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › validateMigration › should detect RLS not enabled

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › getMigrationHistory › should retrieve migration history

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › getMigrationHistory › should handle empty migration history

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › getMigrationHistory › should handle query errors gracefully

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Migration Package › should calculate correct checksum

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Migration Package › should save migration package to file

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Seed Data Scripts › should include Bangladesh chart of accounts

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Seed Data Scripts › should set up parent-child account relationships

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Seed Data Scripts › should use correct tenant ID

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Rollback Scripts › should drop all objects in correct order

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Rollback Scripts › should include backup restoration logic

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Rollback Scripts › should record rollback in audit log

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Validation Scripts › should validate schemas exist

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Validation Scripts › should check minimum object counts

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Validation Scripts › should validate RLS is enabled

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Validation Scripts › should check journal entry balance

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\cache\dist\cache.interceptor.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\infrastructure\dist\infrastructure.module.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\infrastructure\dist\infrastructure.module.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
ts-jest[ts-compiler] (WARN) Got a `.js` file to compile while `allowJs` option is not set to `true` (file: C:\Users\riz\vextrus-erp\shared\infrastructure\dist\infrastructure.module.js). To fix this:
  - if you want TypeScript to process JS files, set `allowJs` to `true` in your TypeScript config (usually tsconfig.json)
  - if you do not want TypeScript to process your `.js` files, in your Jest config change the `transform` key which value is `ts-jest` so that it does not match `.js` files anymore
FAIL src/application/services/__tests__/kpi-calculation.service.spec.ts (19.472 s)
  ● KPICalculationService › calculateRealTimeKPIs › should use cached data when available and valid

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 358 |[39m
     [90m 359 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mconnection[33m.[39mquery(query[33m,[39m [tenantId])[33m;[39m
    [31m[1m>[22m[39m[90m 360 |[39m     [36mconst[39m data [33m=[39m result[[35m0[39m] [33m||[39m {}[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 361 |[39m
     [90m 362 |[39m     [36mreturn[39m {
     [90m 363 |[39m       currentRatio[33m:[39m data[33m.[39mcurrent_ratio [33m||[39m [35m0[39m[33m,[39m[0m

      at KPICalculationService.calculateFinancialHealthKPIs (application/services/kpi-calculation.service.ts:360:24)
          at async Promise.all (index 0)
      at KPICalculationService.calculateRealTimeKPIs (application/services/kpi-calculation.service.ts:234:9)
      at Object.<anonymous> (application/services/__tests__/kpi-calculation.service.spec.ts:165:22)

  ● KPICalculationService › generateSmartAlerts › should generate alerts for low liquidity

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 498 |[39m
     [90m 499 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mconnection[33m.[39mquery(query[33m,[39m [tenantId])[33m;[39m
    [31m[1m>[22m[39m[90m 500 |[39m     [36mconst[39m data [33m=[39m result[[35m0[39m] [33m||[39m {}[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 501 |[39m
     [90m 502 |[39m     [36mreturn[39m {
     [90m 503 |[39m       grossProfitMargin[33m:[39m data[33m.[39mgross_profit_margin [33m||[39m [35m0[39m[33m,[39m[0m

      at KPICalculationService.calculateProfitabilityKPIs (application/services/kpi-calculation.service.ts:500:24)
          at async Promise.all (index 3)
      at KPICalculationService.calculateRealTimeKPIs (application/services/kpi-calculation.service.ts:234:9)
      at KPICalculationService.generateSmartAlerts (application/services/kpi-calculation.service.ts:663:18)
      at Object.<anonymous> (application/services/__tests__/kpi-calculation.service.spec.ts:189:22)

FAIL src/application/services/__tests__/analytics-dashboard.service.spec.ts (19.571 s)
  ● AnalyticsDashboardService › getFinancialDashboard › should calculate dashboard data if not cached

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 591 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mconnection[33m.[39mquery(query[33m,[39m [tenantId[33m,[39m period[33m.[39m[36mfrom[39m[33m,[39m period[33m.[39mto])[33m;[39m
     [90m 592 |[39m
    [31m[1m>[22m[39m[90m 593 |[39m     [36mreturn[39m result[33m.[39mmap((row[33m:[39m any) [33m=>[39m ({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 594 |[39m       date[33m:[39m row[33m.[39mday[33m.[39mtoISOString()[33m.[39msplit([32m'T'[39m)[[35m0[39m][33m,[39m
     [90m 595 |[39m       amount[33m:[39m parseFloat(row[33m.[39mworking_capital)[33m,[39m
     [90m 596 |[39m     }))[33m;[39m[0m

      at AnalyticsDashboardService.calculateWorkingCapitalTrend (application/services/analytics-dashboard.service.ts:593:19)
      at AnalyticsDashboardService.getFinancialDashboard (application/services/analytics-dashboard.service.ts:206:16)
      at Object.<anonymous> (application/services/__tests__/analytics-dashboard.service.spec.ts:211:22)

  ● AnalyticsDashboardService › getFinancialDashboard › should support Bengali localization

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 252 |[39m       expect(result)[33m.[39mtoBeDefined()[33m;[39m
     [90m 253 |[39m       [90m// Bengali localization should be applied to charts[39m
    [31m[1m>[22m[39m[90m 254 |[39m       expect(bengaliService[33m.[39mformatCurrency)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 255 |[39m     })[33m;[39m
     [90m 256 |[39m
     [90m 257 |[39m     it([32m'should force refresh when requested'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (application/services/__tests__/analytics-dashboard.service.spec.ts:254:45)

  ● AnalyticsDashboardService › performance › should use parallel data fetching

    expect(received).toHaveBeenCalledTimes(expected)

    Matcher error: expected value must be a non-negative integer

    Expected has type:  object
    Expected has value: Any<Number>

    [0m [90m 327 |[39m
     [90m 328 |[39m       [90m// Verify multiple queries were initiated[39m
    [31m[1m>[22m[39m[90m 329 |[39m       expect(connection[33m.[39mquery)[33m.[39mtoHaveBeenCalledTimes(expect[33m.[39many([33mNumber[39m))[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 330 |[39m     })[33m;[39m
     [90m 331 |[39m   })[33m;[39m
     [90m 332 |[39m[0m

      at Object.<anonymous> (application/services/__tests__/analytics-dashboard.service.spec.ts:329:32)

  ● AnalyticsDashboardService › error handling › should continue without cache on Redis error

    Redis connection failed

    [0m [90m 347 |[39m
     [90m 348 |[39m     it([32m'should continue without cache on Redis error'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 349 |[39m       redisService[33m.[39m[36mget[39m[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Redis connection failed'[39m))[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 350 |[39m       connection[33m.[39mquery[33m.[39mmockResolvedValue([])[33m;[39m
     [90m 351 |[39m
     [90m 352 |[39m       [36mconst[39m period[33m:[39m [33mDateRange[39m [33m=[39m {[0m

      at Object.<anonymous> (application/services/__tests__/analytics-dashboard.service.spec.ts:349:42)

[31m[Nest] 3988  - [39m10/24/2025, 12:15:00 PM [31m  ERROR[39m [38;5;3m[DeploymentPreparationService] [39m[31mMissing configuration: database.host[39m
FAIL src/application/services/__tests__/deployment-preparation.service.spec.ts (19.625 s)
  ● DeploymentPreparationService › generateEnvironmentConfig › should save configuration to YAML file

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "config/production.yaml", Any<String>, "utf8"
    Received: "C:\\Users\\riz\\vextrus-erp\\services\\finance\\config\\production.yaml", "environment: production
    database:
      host: prod-db.vextrus.com
      port: 5432
      database: vextrus_finance
      username: finance_user
      password: secure_password
      ssl: true
      poolSize: 100
    redis:
      host: prod-redis.vextrus.com
      port: 6379
      password: redis_password
      cluster: true
    monitoring:
      enabled: true
      prometheus: http://prometheus.vextrus.com
      grafana: http://grafana.vextrus.com
      sentry:
        dsn: https://sentry.vextrus.com/dsn
        environment: production
    security:
      encryptionKey: 18b69230f5e91c54f41dc171e3bf1d4b9027191dfb2f5e6f4f8af5f7dc885b47
      jwtSecret: 161ed254b2d14ceb82ad79d34b1bc5a973879a7c514c963c97b4ff6a91d0b60d
      rateLimiting:
        enabled: true
        maxRequests: 100
        windowMs: 60000
    performance:
      caching: true
      compression: true
      clustering: true
      workers: 4
    ", "utf8"

    Number of calls: 1

    [0m [90m 214 |[39m       [36mawait[39m service[33m.[39mgenerateEnvironmentConfig([32m'production'[39m)[33m;[39m
     [90m 215 |[39m
    [31m[1m>[22m[39m[90m 216 |[39m       expect(mockWriteFile)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 217 |[39m         expect[33m.[39mstringContaining([32m'config/production.yaml'[39m)[33m,[39m
     [90m 218 |[39m         expect[33m.[39many([33mString[39m)[33m,[39m
     [90m 219 |[39m         [32m'utf8'[39m[33m,[39m[0m

      at Object.<anonymous> (application/services/__tests__/deployment-preparation.service.spec.ts:216:29)

  ● DeploymentPreparationService › createDeploymentChecklist › should save checklist to file

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "deployment/checklist.md", Any<String>, "utf8"
    Received: "C:\\Users\\riz\\vextrus-erp\\services\\finance\\deployment\\checklist.md", "
    # Finance Module Production Deployment Checklist

    ## Pre-Deployment (24 hours before)

    ### Infrastructure
    - [ ] Database server provisioned (PostgreSQL 14+)
    - [ ] Redis cluster configured (6.2+)
    - [ ] Load balancer configured
    - [ ] SSL certificates installed
    - [ ] DNS records updated
    - [ ] CDN configured for static assets

    ### Database
    - [ ] Production database created
    - [ ] User permissions configured
    - [ ] Connection pooling optimized
    - [ ] Backup strategy implemented
    - [ ] Replication configured
    - [ ] Monitoring enabled

    ### Security
    - [ ] Secrets management configured (HashiCorp Vault / AWS Secrets Manager)
    - [ ] Environment variables secured
    - [ ] API keys rotated
    - [ ] Rate limiting configured
    - [ ] WAF rules configured
    - [ ] Security headers implemented
    - [ ] CORS policy configured

    ### Monitoring
    - [ ] Prometheus configured
    - [ ] Grafana dashboards created
    - [ ] Sentry integration configured
    - [ ] Log aggregation configured (ELK/CloudWatch)
    - [ ] Alerts configured
    - [ ] Health check endpoints verified

    ## Deployment Day

    ### Pre-Deployment (2 hours before)
    - [ ] Full database backup taken
    - [ ] Configuration backup created
    - [ ] Rollback plan reviewed
    - [ ] Team notified
    - [ ] Maintenance window announced

    ### Deployment Steps

    #### 1. Database Migration (30 minutes)
    - [ ] Run pre-migration backup
    - [ ] Execute migration scripts
    - [ ] Verify schema changes
    - [ ] Run post-migration validation
    - [ ] Update indexes
    - [ ] Analyze tables

    #### 2. Application Deployment (45 minutes)
    - [ ] Deploy to staging environment
    - [ ] Run smoke tests on staging
    - [ ] Deploy to production (blue-green)
    - [ ] Verify service health
    - [ ] Run integration tests
    - [ ] Switch traffic to new version

    #### 3. Configuration (15 minutes)
    - [ ] Update environment variables
    - [ ] Verify API endpoints
    - [ ] Check Redis connectivity
    - [ ] Verify third-party integrations
    - [ ] Update feature flags

    #### 4. Validation (30 minutes)
    - [ ] Run health checks
    - [ ] Verify critical user flows
    - [ ] Check performance metrics
    - [ ] Review error logs
    - [ ] Test Bangladesh compliance features
    - [ ] Verify payment gateway integration

    ## Post-Deployment

    ### Immediate (First 2 hours)
    - [ ] Monitor error rates
    - [ ] Check response times
    - [ ] Review memory usage
    - [ ] Monitor CPU utilization
    - [ ] Check database connections
    - [ ] Review cache hit rates

    ### Day 1
    - [ ] Review performance metrics
    - [ ] Analyze user feedback
    - [ ] Check compliance reports
    - [ ] Review security logs
    - [ ] Update documentation
    - [ ] Conduct retrospective

    ### Week 1
    - [ ] Performance tuning based on metrics
    - [ ] Address any reported issues
    - [ ] Optimize slow queries
    - [ ] Review and adjust caching
    - [ ] Update monitoring thresholds
    - [ ] Plan next iteration

    ## Rollback Procedure

    If critical issues detected:

    1. **Immediate Actions** (5 minutes)
       - [ ] Switch traffic to previous version
       - [ ] Notify team of rollback
       - [ ] Preserve logs for analysis

    2. **Database Rollback** (if needed, 15 minutes)
       - [ ] Execute rollback scripts
       - [ ] Restore from backup if necessary
       - [ ] Verify data integrity

    3. **Post-Rollback** (30 minutes)
       - [ ] Verify system stability
       - [ ] Document issues
       - [ ] Plan remediation

    ## Emergency Contacts

    - **DevOps Lead**: [Contact]
    - **Database Admin**: [Contact]
    - **Security Team**: [Contact]
    - **Product Owner**: [Contact]
    - **On-Call Engineer**: [Contact]

    ## Key Metrics to Monitor

    - API Response Time: Target < 100ms
    - Database Query Time: Target < 50ms
    - Cache Hit Rate: Target > 80%
    - Error Rate: Target < 0.1%
    - Concurrent Users: Support 50,000+
    - Memory Usage: < 80% of allocated
    - CPU Usage: < 70% sustained

    ## Bangladesh-Specific Validations

    - [ ] TIN validation working (10-12 digits)
    - [ ] BIN validation working (9 digits)
    - [ ] NID validation working (10/13/17 digits)
    - [ ] Mobile format validation (01[3-9]XXXXXXXX)
    - [ ] VAT calculation accurate (15%)
    - [ ] Bengali language support functional
    - [ ] Fiscal year logic correct (July-June)

    ---
    Generated: 2025-10-24T06:15:00.175Z
    ", "utf8"

    Number of calls: 1

    [0m [90m 273 |[39m       [36mawait[39m service[33m.[39mcreateDeploymentChecklist()[33m;[39m
     [90m 274 |[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(mockWriteFile)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 276 |[39m         expect[33m.[39mstringContaining([32m'deployment/checklist.md'[39m)[33m,[39m
     [90m 277 |[39m         expect[33m.[39many([33mString[39m)[33m,[39m
     [90m 278 |[39m         [32m'utf8'[39m[33m,[39m[0m

      at Object.<anonymous> (application/services/__tests__/deployment-preparation.service.spec.ts:275:29)

  ● DeploymentPreparationService › createProductionDocumentation › should create comprehensive production documentation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "docs/PRODUCTION.md", StringContaining "Finance Module Production Documentation", "utf8"
    Received: "C:\\Users\\riz\\vextrus-erp\\services\\finance\\docs\\PRODUCTION.md", "
    # Finance Module Production Documentation

    ## Overview
    The Finance Module is a critical component of the Vextrus ERP system, handling all financial transactions, accounting, and compliance for Bangladesh enterprises.

    ## Architecture

    ### Components
    - **API Gateway**: NestJS-based REST/GraphQL APIs
    - **Database**: PostgreSQL 14+ with read replicas
    - **Cache**: Redis 6.2+ cluster
    - **Message Queue**: RabbitMQ for async processing
    - **Storage**: S3-compatible object storage for documents

    ### Technology Stack
    - Runtime: Node.js 18 LTS
    - Framework: NestJS 10
    - Database: PostgreSQL 14
    - Cache: Redis 6.2
    - Language: TypeScript 5
    - Testing: Jest + K6

    ## API Documentation

    ### Authentication
    All API requests require JWT authentication:
    ```
    Authorization: Bearer <token>
    ```

    ### Core Endpoints

    #### Accounts
    - GET /api/finance/accounts - List all accounts
    - POST /api/finance/accounts - Create account
    - GET /api/finance/accounts/:id - Get account details
    - PUT /api/finance/accounts/:id - Update account
    - DELETE /api/finance/accounts/:id - Delete account

    #### Transactions
    - GET /api/finance/transactions - List transactions
    - POST /api/finance/transactions - Create transaction
    - GET /api/finance/transactions/:id - Get transaction
    - POST /api/finance/transactions/:id/approve - Approve transaction
    - POST /api/finance/transactions/:id/reject - Reject transaction

    #### Invoices
    - GET /api/finance/invoices - List invoices
    - POST /api/finance/invoices - Create invoice
    - GET /api/finance/invoices/:id - Get invoice
    - PUT /api/finance/invoices/:id - Update invoice
    - POST /api/finance/invoices/:id/send - Send invoice
    - POST /api/finance/invoices/:id/payment - Record payment

    ## Configuration

    ### Environment Variables
    ```env
    # Database
    DATABASE_HOST=postgres.vextrus.com
    DATABASE_PORT=5432
    DATABASE_NAME=vextrus_finance
    DATABASE_USER=finance_user
    DATABASE_PASSWORD=<encrypted>

    # Redis
    REDIS_HOST=redis.vextrus.com
    REDIS_PORT=6379
    REDIS_PASSWORD=<encrypted>

    # Security
    JWT_SECRET=<encrypted>
    ENCRYPTION_KEY=<encrypted>

    # Bangladesh Compliance
    NBR_API_KEY=<encrypted>
    VAT_RATE=0.15
    FISCAL_YEAR_START=7
    ```

    ## Monitoring

    ### Health Checks
    - Primary: GET /health
    - Database: GET /health/db
    - Redis: GET /health/redis
    - Dependencies: GET /health/deps

    ### Metrics
    Prometheus metrics available at /metrics:
    - finance_api_requests_total
    - finance_api_request_duration_seconds
    - finance_transaction_total
    - finance_invoice_total
    - finance_database_connections
    - finance_cache_hit_rate

    ### Logging
    Structured JSON logs sent to:
    - CloudWatch (AWS)
    - ElasticSearch (on-premise)
    - Sentry (errors)

    Log levels:
    - ERROR: System errors requiring immediate attention
    - WARN: Potential issues or degraded performance
    - INFO: Normal operations and audit trail
    - DEBUG: Detailed debugging (disabled in production)

    ## Security

    ### Authentication & Authorization
    - JWT-based authentication
    - Role-based access control (RBAC)
    - Row-level security (RLS) for multi-tenancy
    - API key authentication for external systems

    ### Encryption
    - Data at rest: AES-256
    - Data in transit: TLS 1.3
    - Database: Transparent Data Encryption (TDE)
    - Backups: GPG encrypted

    ### Compliance
    - PCI DSS Level 2 compliant
    - Bangladesh Bank regulations
    - NBR tax compliance
    - GDPR data protection

    ## Performance

    ### SLA Targets
    - Availability: 99.9% uptime
    - API Response: < 100ms p95
    - Database Query: < 50ms p95
    - Throughput: 10,000 req/sec
    - Concurrent Users: 50,000+

    ### Optimization
    - Database connection pooling (100 connections)
    - Redis caching (5-minute TTL)
    - Query result caching
    - Materialized views for reports
    - Index optimization
    - Horizontal scaling support

    ## Disaster Recovery

    ### Backup Strategy
    - Full backup: Daily at 2 AM BDT
    - Incremental: Every 6 hours
    - Transaction logs: Continuous
    - Retention: 30 days
    - Off-site replication: AWS S3

    ### Recovery Procedures
    1. **Database Failure**
       - Failover to read replica (< 1 minute)
       - Promote replica to primary
       - Restore from backup if needed

    2. **Application Failure**
       - Auto-scaling triggers new instances
       - Load balancer health checks
       - Circuit breaker pattern

    3. **Complete Disaster**
       - Restore from off-site backups
       - RTO: 4 hours
       - RPO: 1 hour

    ## Troubleshooting

    ### Common Issues

    #### High Memory Usage
    ```bash
    # Check memory usage
    docker stats finance-module

    # Restart with increased memory
    docker-compose up -d --scale finance=2
    ```

    #### Slow Queries
    ```sql
    -- Find slow queries
    SELECT query, calls, mean_time
    FROM pg_stat_statements
    WHERE mean_time > 100
    ORDER BY mean_time DESC;

    -- Analyze query
    EXPLAIN ANALYZE <query>;
    ```

    #### Cache Issues
    ```bash
    # Check Redis status
    redis-cli ping

    # Clear cache
    redis-cli FLUSHDB
    ```

    ## Support

    ### Contacts
    - Engineering: engineering@vextrus.com
    - DevOps: devops@vextrus.com
    - Security: security@vextrus.com
    - On-call: +880-XXX-XXXX

    ### Resources
    - API Docs: https://api.vextrus.com/finance/docs
    - Monitoring: https://grafana.vextrus.com
    - Logs: https://logs.vextrus.com
    - Wiki: https://wiki.vextrus.com/finance

    ---
    Last Updated: 2025-10-24T06:15:00.185Z
    Version: 1.0.0
    ", "utf8"

    Number of calls: 1

    [0m [90m 390 |[39m       [36mawait[39m service[33m.[39mcreateProductionDocumentation()[33m;[39m
     [90m 391 |[39m
    [31m[1m>[22m[39m[90m 392 |[39m       expect(mockWriteFile)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 393 |[39m         expect[33m.[39mstringContaining([32m'docs/PRODUCTION.md'[39m)[33m,[39m
     [90m 394 |[39m         expect[33m.[39mstringContaining([32m'Finance Module Production Documentation'[39m)[33m,[39m
     [90m 395 |[39m         [32m'utf8'[39m[33m,[39m[0m

      at Object.<anonymous> (application/services/__tests__/deployment-preparation.service.spec.ts:392:29)

  ● DeploymentPreparationService › Health Checks › should validate required configuration

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 485 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m service[[32m'checkConfiguration'[39m]([32m'production'[39m)[33m;[39m
     [90m 486 |[39m
    [31m[1m>[22m[39m[90m 487 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 488 |[39m       expect(configService[33m.[39m[36mget[39m)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 489 |[39m     })[33m;[39m
     [90m 490 |[39m[0m

      at Object.<anonymous> (application/services/__tests__/deployment-preparation.service.spec.ts:487:22)

PASS src/application/queries/handlers/__tests__/get-trial-balance.handler.spec.ts (19.72 s)
PASS src/application/services/__tests__/account-balance.service.spec.ts (19.764 s)
PASS src/application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts (19.775 s)
  ● Console

    console.log
      ✓ 100 accounts: 1ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:110:15)

    console.log
      ✓ 1,000 accounts: 0ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:130:15)

    console.log
      ✓ 10,000 accounts: 1ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:150:15)

    console.log
      ✓ Cache HIT (10,000 accounts): 0ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:194:15)

    console.log
      ✓ Memory delta for 10,000 accounts: 3.95MB

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:216:15)

    console.log
        100 accounts: 0ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:238:17)

    console.log
        500 accounts: 0ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:238:17)

    console.log
        1000 accounts: 0ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:238:17)

    console.log
        5000 accounts: 0ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:238:17)

    console.log
        10000 accounts: 1ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:238:17)

    console.log
      ✓ Execution too fast to measure scaling (<1ms for all sizes)

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:252:17)

    console.log
      ✓ Empty account list: 0ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:273:15)

    console.log
      ✓ Single account: 0ms

      at Object.<anonymous> (application/queries/handlers/__tests__/get-trial-balance.performance.spec.ts:292:15)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.

Summary of all failing tests
FAIL domain/aggregates/invoice/invoice.aggregate.spec.ts (16.01 s)
  ● Invoice Aggregate › Event Sourcing › should increment version for each event

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 853 |[39m       [90m// Assert[39m
     [90m 854 |[39m       [90m// Version increases with each applied event[39m
    [31m[1m>[22m[39m[90m 855 |[39m       expect(invoice[33m.[39mversion)[33m.[39mtoBeGreaterThan(initialVersion)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 856 |[39m     })[33m;[39m
     [90m 857 |[39m   })[33m;[39m
     [90m 858 |[39m[0m

      at Object.<anonymous> (domain/aggregates/invoice/invoice.aggregate.spec.ts:855:31)

FAIL domain/aggregates/payment/payment.aggregate.spec.ts (16.189 s)
  ● Payment Aggregate › Payment Reversal › should throw error when reversing failed payment

    Cannot fail payment in COMPLETED status

    [0m [90m 437 |[39m   fail(reason[33m:[39m string)[33m:[39m [36mvoid[39m {
     [90m 438 |[39m     [36mif[39m ([36mthis[39m[33m.[39mstatus [33m!==[39m [33mPaymentStatus[39m[33m.[39m[33mPENDING[39m [33m&&[39m [36mthis[39m[33m.[39mstatus [33m!==[39m [33mPaymentStatus[39m[33m.[39m[33mPROCESSING[39m) {
    [31m[1m>[22m[39m[90m 439 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Cannot fail payment in ${this.status} status`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 440 |[39m     }
     [90m 441 |[39m
     [90m 442 |[39m     [36mthis[39m[33m.[39mapply([36mnew[39m [33mPaymentFailedEvent[39m([0m

      at Payment.fail (domain/aggregates/payment/payment.aggregate.ts:439:13)
      at Object.<anonymous> (domain/aggregates/payment/payment.aggregate.spec.ts:815:15)

  ● Payment Aggregate › Event Sourcing › should increment version for each event

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 924 |[39m
     [90m 925 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 926 |[39m       expect(payment[33m.[39mversion)[33m.[39mtoBeGreaterThan(initialVersion)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 927 |[39m     })[33m;[39m
     [90m 928 |[39m   })[33m;[39m
     [90m 929 |[39m[0m

      at Object.<anonymous> (domain/aggregates/payment/payment.aggregate.spec.ts:926:31)

  ● Payment Aggregate › Multi-Tenancy › should include tenant ID in all events

    Cannot fail payment in COMPLETED status

    [0m [90m 437 |[39m   fail(reason[33m:[39m string)[33m:[39m [36mvoid[39m {
     [90m 438 |[39m     [36mif[39m ([36mthis[39m[33m.[39mstatus [33m!==[39m [33mPaymentStatus[39m[33m.[39m[33mPENDING[39m [33m&&[39m [36mthis[39m[33m.[39mstatus [33m!==[39m [33mPaymentStatus[39m[33m.[39m[33mPROCESSING[39m) {
    [31m[1m>[22m[39m[90m 439 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Cannot fail payment in ${this.status} status`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 440 |[39m     }
     [90m 441 |[39m
     [90m 442 |[39m     [36mthis[39m[33m.[39mapply([36mnew[39m [33mPaymentFailedEvent[39m([0m

      at Payment.fail (domain/aggregates/payment/payment.aggregate.ts:439:13)
      at Object.<anonymous> (domain/aggregates/payment/payment.aggregate.spec.ts:945:15)

FAIL domain/aggregates/journal/journal-entry.aggregate.spec.ts (16.2 s)
  ● JournalEntry Aggregate › Journal Entry Creation › should create a journal entry with correct initial state

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:23:36)

  ● JournalEntry Aggregate › Journal Entry Creation › should calculate fiscal period correctly for Bangladesh

    Date 2024-07-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:34:40)

  ● JournalEntry Aggregate › Journal Entry Creation › should generate correct journal number prefix by type

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:50:43)

  ● JournalEntry Aggregate › Double-Entry Validation › should validate balanced journal entries

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:67:36)

  ● JournalEntry Aggregate › Double-Entry Validation › should reject unbalanced journal entries

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:89:36)

  ● JournalEntry Aggregate › Double-Entry Validation › should require at least two journal lines

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:110:36)

  ● JournalEntry Aggregate › Double-Entry Validation › should handle complex multi-line entries

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:124:36)

  ● JournalEntry Aggregate › Journal Line Validation › should reject lines with both debit and credit amounts

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:158:36)

  ● JournalEntry Aggregate › Journal Line Validation › should reject lines with zero amounts

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:171:36)

  ● JournalEntry Aggregate › Journal Line Validation › should accept lines with only debit amount

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:184:36)

  ● JournalEntry Aggregate › Journal Line Validation › should accept lines with only credit amount

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:198:36)

  ● JournalEntry Aggregate › Journal Posting › should post a balanced journal entry

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:214:36)

  ● JournalEntry Aggregate › Journal Posting › should not allow posting unbalanced entries

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:236:36)

  ● JournalEntry Aggregate › Journal Posting › should not allow posting already posted journals

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:255:36)

  ● JournalEntry Aggregate › Reversing Entries › should create a reversing entry with swapped debits and credits

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:276:36)

  ● JournalEntry Aggregate › Reversing Entries › should not allow reversing unposted journals

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:309:36)

  ● JournalEntry Aggregate › Reversing Entries › should reject reversing date in closed period

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:328:36)

  ● JournalEntry Aggregate › Cost Center and Project Tracking › should track cost centers in journal lines

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:352:36)

  ● JournalEntry Aggregate › Cost Center and Project Tracking › should track tax codes in journal lines

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:374:36)

  ● JournalEntry Aggregate › Auto-Post Feature › should auto-post journal if requested and balanced

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:417:36)

  ● JournalEntry Aggregate › Auto-Post Feature › should not auto-post unbalanced journal

    Date 2024-01-15T00:00:00.000Z is in a closed accounting period

    [0m [90m 272 |[39m     [90m// Validate accounting period is open[39m
     [90m 273 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39misAccountingPeriodOpen(command[33m.[39mjournalDate)) {
    [31m[1m>[22m[39m[90m 274 |[39m       [36mthrow[39m [36mnew[39m [33mInvalidAccountingPeriodException[39m(command[33m.[39mjournalDate)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 275 |[39m     }
     [90m 276 |[39m
     [90m 277 |[39m     [36mconst[39m fiscalPeriod [33m=[39m [36mthis[39m[33m.[39mcalculateFiscalPeriod(command[33m.[39mjournalDate)[33m;[39m[0m

      at Function.create (domain/aggregates/journal/journal-entry.aggregate.ts:274:13)
      at Object.<anonymous> (domain/aggregates/journal/journal-entry.aggregate.spec.ts:439:36)

FAIL domain/aggregates/chart-of-account/chart-of-account.aggregate.spec.ts (16.288 s)
  ● ChartOfAccount Aggregate › Event Sourcing › should increment version for each event

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 722 |[39m
     [90m 723 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 724 |[39m       expect(account[33m.[39mversion)[33m.[39mtoBeGreaterThan(initialVersion)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 725 |[39m     })[33m;[39m
     [90m 726 |[39m   })[33m;[39m
     [90m 727 |[39m[0m

      at Object.<anonymous> (domain/aggregates/chart-of-account/chart-of-account.aggregate.spec.ts:724:31)

  ● ChartOfAccount Aggregate › Multi-Tenancy › should include tenant ID in all events

    Cannot deactivate account with non-zero balance

    [0m [90m 276 |[39m
     [90m 277 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mbalance[33m.[39misZero()) {
    [31m[1m>[22m[39m[90m 278 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Cannot deactivate account with non-zero balance'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 279 |[39m     }
     [90m 280 |[39m
     [90m 281 |[39m     [36mthis[39m[33m.[39mapply([36mnew[39m [33mAccountDeactivatedEvent[39m([0m

      at ChartOfAccount.deactivate (domain/aggregates/chart-of-account/chart-of-account.aggregate.ts:278:13)
      at Object.<anonymous> (domain/aggregates/chart-of-account/chart-of-account.aggregate.spec.ts:743:15)

FAIL application/services/__tests__/performance-benchmarks.spec.ts
  ● Test suite failed to run

    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m108[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'date' does not exist on type 'ExtractedInvoiceData'.

    [7m108[0m       expect(result.date).toBe('2024-10-16');
    [7m   [0m [91m                    ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m112[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'customerTin' does not exist on type 'ExtractedInvoiceData'.

    [7m112[0m       expect(result.customerTin).toBe('987654321098');
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m118[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'musahkCompliant' does not exist on type 'ExtractedInvoiceData'.

    [7m118[0m       expect(result.musahkCompliant).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m146[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'loadLanguage' does not exist on type 'Mocked<Worker>'.

    [7m146[0m       expect(mockWorker.loadLanguage).toHaveBeenCalledWith('eng+ben');
    [7m   [0m [91m                        ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m147[0m:[93m25[0m - [91merror[0m[90m TS2551: [0mProperty 'initialize' does not exist on type 'Mocked<Worker>'. Did you mean 'reinitialize'?

    [7m147[0m       expect(mockWorker.initialize).toHaveBeenCalledWith('eng+ben');
    [7m   [0m [91m                        ~~~~~~~~~~[0m

      [96m../../node_modules/.pnpm/tesseract.js@5.1.1/node_modules/tesseract.js/src/index.d.ts[0m:[93m23[0m:[93m5[0m
        [7m23[0m     reinitialize(langs?: string | Lang[], oem?: OEM, config?: string | Partial<InitOptions>, jobId?: string): Promise<ConfigResult>
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        'reinitialize' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m215[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'warnings' does not exist on type 'ExtractedInvoiceData'.

    [7m215[0m       expect(result.warnings).toContain('Low OCR confidence detected. Manual review recommended.');
    [7m   [0m [91m                    ~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m237[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'customerTin' does not exist on type 'ExtractedInvoiceData'.

    [7m237[0m       expect(result.customerTin).toMatch(/^\d{10,12}$/);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m238[0m:[93m21[0m - [91merror[0m[90m TS2551: [0mProperty 'validations' does not exist on type 'ExtractedInvoiceData'. Did you mean 'validation'?

    [7m238[0m       expect(result.validations.tinValid).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m

      [96msrc/application/services/ocr-invoice-processor.service.ts[0m:[93m27[0m:[93m3[0m
        [7m27[0m   validation: ValidationResult;
        [7m  [0m [96m  ~~~~~~~~~~[0m
        'validation' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m256[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ExtractedInvoiceData'.

    [7m256[0m       expect(result.errors).toContain('Invalid TIN format. Must be 10-12 digits.');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m257[0m:[93m21[0m - [91merror[0m[90m TS2551: [0mProperty 'validations' does not exist on type 'ExtractedInvoiceData'. Did you mean 'validation'?

    [7m257[0m       expect(result.validations.tinValid).toBe(false);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m

      [96msrc/application/services/ocr-invoice-processor.service.ts[0m:[93m27[0m:[93m3[0m
        [7m27[0m   validation: ValidationResult;
        [7m  [0m [96m  ~~~~~~~~~~[0m
        'validation' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m276[0m:[93m21[0m - [91merror[0m[90m TS2551: [0mProperty 'validations' does not exist on type 'ExtractedInvoiceData'. Did you mean 'validation'?

    [7m276[0m       expect(result.validations.binValid).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m

      [96msrc/application/services/ocr-invoice-processor.service.ts[0m:[93m27[0m:[93m3[0m
        [7m27[0m   validation: ValidationResult;
        [7m  [0m [96m  ~~~~~~~~~~[0m
        'validation' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m295[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'musahkCompliant' does not exist on type 'ExtractedInvoiceData'.

    [7m295[0m       expect(result.musahkCompliant).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m296[0m:[93m21[0m - [91merror[0m[90m TS2551: [0mProperty 'validations' does not exist on type 'ExtractedInvoiceData'. Did you mean 'validation'?

    [7m296[0m       expect(result.validations.musahkCompliant).toBe(true);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m

      [96msrc/application/services/ocr-invoice-processor.service.ts[0m:[93m27[0m:[93m3[0m
        [7m27[0m   validation: ValidationResult;
        [7m  [0m [96m  ~~~~~~~~~~[0m
        'validation' is declared here.
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m351[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'category' does not exist on type 'CodedLineItem'.

    [7m351[0m       expect(result.lineItems[0].category).toBe('Supplies');
    [7m   [0m [91m                                 ~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m354[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'category' does not exist on type 'CodedLineItem'.

    [7m354[0m       expect(result.lineItems[1].category).toBe('Supplies');
    [7m   [0m [91m                                 ~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m357[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'category' does not exist on type 'CodedLineItem'.

    [7m357[0m       expect(result.lineItems[2].category).toBe('Supplies');
    [7m   [0m [91m                                 ~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m495[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ExtractedInvoiceData'.

    [7m495[0m       expect(result.errors).toContain('Missing required field: Invoice Number');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m496[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ExtractedInvoiceData'.

    [7m496[0m       expect(result.errors).toContain('Missing required field: Vendor Name');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m497[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ExtractedInvoiceData'.

    [7m497[0m       expect(result.errors).toContain('Missing required field: Total Amount');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m553[0m:[93m51[0m - [91merror[0m[90m TS2339: [0mProperty 'frequency' does not exist on type 'JournalEntry'.

    [7m553[0m       const weeklyEntries = entries.filter(e => e.frequency === 'WEEKLY');
    [7m   [0m [91m                                                  ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m557[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'nextOccurrence' does not exist on type 'JournalEntry'.

    [7m557[0m         expect(entry.nextOccurrence).toBeDefined();
    [7m   [0m [91m                     ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m558[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'lastProcessed' does not exist on type 'JournalEntry'.

    [7m558[0m         expect(entry.lastProcessed).toBeDefined();
    [7m   [0m [91m                     ~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m565[0m:[93m52[0m - [91merror[0m[90m TS2339: [0mProperty 'frequency' does not exist on type 'JournalEntry'.

    [7m565[0m       const monthlyEntries = entries.filter(e => e.frequency === 'MONTHLY');
    [7m   [0m [91m                                                   ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m569[0m:[93m41[0m - [91merror[0m[90m TS2339: [0mProperty 'nextOccurrence' does not exist on type 'JournalEntry'.

    [7m569[0m         const nextDate = new Date(entry.nextOccurrence);
    [7m   [0m [91m                                        ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m580[0m:[93m47[0m - [91merror[0m[90m TS2339: [0mProperty 'nextOccurrence' does not exist on type 'JournalEntry'.

    [7m580[0m         const nextOccurrence = new Date(entry.nextOccurrence);
    [7m   [0m [91m                                              ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m605[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m605[0m           .filter(line => line.type === 'DEBIT')
    [7m   [0m [91m                               ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m606[0m:[93m45[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m606[0m           .reduce((sum, line) => sum + line.amount, 0);
    [7m   [0m [91m                                            ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m609[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m609[0m           .filter(line => line.type === 'CREDIT')
    [7m   [0m [91m                               ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m610[0m:[93m45[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m610[0m           .reduce((sum, line) => sum + line.amount, 0);
    [7m   [0m [91m                                            ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m644[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'method' does not exist on type 'JournalEntry'.

    [7m644[0m       const straightLineEntries = entries.filter(e => e.method === 'STRAIGHT_LINE');
    [7m   [0m [91m                                                        ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m647[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'asset' does not exist on type 'JournalEntry'.

    [7m647[0m         const asset = entry.asset;
    [7m   [0m [91m                            ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m651[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m651[0m         const depreciationAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                           ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m651[0m:[93m79[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m651[0m         const depreciationAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                                              ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m660[0m:[93m61[0m - [91merror[0m[90m TS2339: [0mProperty 'method' does not exist on type 'JournalEntry'.

    [7m660[0m       const decliningBalanceEntries = entries.filter(e => e.method === 'DECLINING_BALANCE');
    [7m   [0m [91m                                                            ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m663[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'asset' does not exist on type 'JournalEntry'.

    [7m663[0m         const asset = entry.asset;
    [7m   [0m [91m                            ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m668[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m668[0m         const depreciationAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                           ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m668[0m:[93m79[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m668[0m         const depreciationAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                                              ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m678[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'asset' does not exist on type 'JournalEntry'.

    [7m678[0m         const asset = entry.asset;
    [7m   [0m [91m                            ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m702[0m:[93m58[0m - [91merror[0m[90m TS2339: [0mProperty 'method' does not exist on type 'JournalEntry'.

    [7m702[0m       const percentageProvisions = entries.filter(e => e.method === 'PERCENTAGE');
    [7m   [0m [91m                                                         ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m705[0m:[93m38[0m - [91merror[0m[90m TS2339: [0mProperty 'baseAmount' does not exist on type 'JournalEntry'.

    [7m705[0m         const expectedAmount = entry.baseAmount * (entry.percentage / 100);
    [7m   [0m [91m                                     ~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m705[0m:[93m58[0m - [91merror[0m[90m TS2339: [0mProperty 'percentage' does not exist on type 'JournalEntry'.

    [7m705[0m         const expectedAmount = entry.baseAmount * (entry.percentage / 100);
    [7m   [0m [91m                                                         ~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m706[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m706[0m         const provisionAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                        ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m706[0m:[93m76[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m706[0m         const provisionAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                                           ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m715[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'method' does not exist on type 'JournalEntry'.

    [7m715[0m       const agingProvisions = entries.filter(e => e.method === 'AGING');
    [7m   [0m [91m                                                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m718[0m:[93m36[0m - [91merror[0m[90m TS2339: [0mProperty 'agingAnalysis' does not exist on type 'JournalEntry'.

    [7m718[0m         const agingBuckets = entry.agingAnalysis;
    [7m   [0m [91m                                   ~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m721[0m:[93m30[0m - [91merror[0m[90m TS7006: [0mParameter 'bucket' implicitly has an 'any' type.

    [7m721[0m         agingBuckets.forEach(bucket => {
    [7m   [0m [91m                             ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m725[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m725[0m         const provisionAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                        ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m725[0m:[93m76[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m725[0m         const provisionAmount = entry.lines.find(l => l.type === 'DEBIT')?.amount || 0;
    [7m   [0m [91m                                                                           ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m735[0m:[93m52[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m735[0m         const creditLine = entry.lines.find(l => l.type === 'CREDIT');
    [7m   [0m [91m                                                   ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m752[0m:[93m60[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ date: string; description: string; lines: { accountCode: string; type: string; amount: number; }[]; }' is not assignable to parameter of type 'Partial<JournalEntry>'.
      Types of property 'date' are incompatible.
        Type 'string' is not assignable to type 'Date'.

    [7m752[0m       const entry = await service.createManualJournalEntry(entryData);
    [7m   [0m [91m                                                           ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m770[0m:[93m42[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ date: string; description: string; lines: { accountCode: string; type: string; amount: number; }[]; }' is not assignable to parameter of type 'Partial<JournalEntry>'.
      Types of property 'date' are incompatible.
        Type 'string' is not assignable to type 'Date'.

    [7m770[0m         service.createManualJournalEntry(entryData)
    [7m   [0m [91m                                         ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m785[0m:[93m42[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ date: string; description: string; lines: { accountCode: string; type: string; amount: number; }[]; }' is not assignable to parameter of type 'Partial<JournalEntry>'.
      Types of property 'date' are incompatible.
        Type 'string' is not assignable to type 'Date'.

    [7m785[0m         service.createManualJournalEntry(entryData)
    [7m   [0m [91m                                         ~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m814[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m814[0m             .filter(l => l.type === 'DEBIT')
    [7m   [0m [91m                           ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m815[0m:[93m41[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m815[0m             .reduce((sum, l) => sum + l.amount, 0);
    [7m   [0m [91m                                        ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m818[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'type' does not exist on type 'JournalLine'.

    [7m818[0m             .filter(l => l.type === 'CREDIT')
    [7m   [0m [91m                           ~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m819[0m:[93m41[0m - [91merror[0m[90m TS2339: [0mProperty 'amount' does not exist on type 'JournalLine'.

    [7m819[0m             .reduce((sum, l) => sum + l.amount, 0);
    [7m   [0m [91m                                        ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m868[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m868[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m874[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksCompleted' does not exist on type 'ClosingResult'.

    [7m874[0m       expect(result.tasksCompleted).toBeGreaterThan(0);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m875[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksSkipped' does not exist on type 'ClosingResult'.

    [7m875[0m       expect(result.tasksSkipped).toBeGreaterThanOrEqual(0);
    [7m   [0m [91m                    ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m883[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m883[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m885[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'executionGroups' does not exist on type 'ClosingResult'.

    [7m885[0m       expect(result.executionGroups).toBeDefined();
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m886[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'executionGroups' does not exist on type 'ClosingResult'.

    [7m886[0m       expect(result.executionGroups.length).toBeGreaterThan(0);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m889[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'executionGroups' does not exist on type 'ClosingResult'.

    [7m889[0m       result.executionGroups.forEach((group, index) => {
    [7m   [0m [91m             ~~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m889[0m:[93m39[0m - [91merror[0m[90m TS7006: [0mParameter 'group' implicitly has an 'any' type.

    [7m889[0m       result.executionGroups.forEach((group, index) => {
    [7m   [0m [91m                                      ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m889[0m:[93m46[0m - [91merror[0m[90m TS7006: [0mParameter 'index' implicitly has an 'any' type.

    [7m889[0m       result.executionGroups.forEach((group, index) => {
    [7m   [0m [91m                                             ~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m906[0m:[93m44[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m906[0m       await service.performContinuousClose(period);
    [7m   [0m [91m                                           ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m927[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m927[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m937[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m937[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m940[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksFailed' does not exist on type 'ClosingResult'.

    [7m940[0m       expect(result.tasksFailed).toBeGreaterThan(0);
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m941[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ClosingResult'.

    [7m941[0m       expect(result.errors).toContain('Persistent failure');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m952[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m952[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m955[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'errors' does not exist on type 'ClosingResult'.

    [7m955[0m       expect(result.errors).toContain('Critical reconciliation failure');
    [7m   [0m [91m                    ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m964[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m964[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m967[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksCompleted' does not exist on type 'ClosingResult'.

    [7m967[0m       expect(result.tasksCompleted).toBeGreaterThan(0);
    [7m   [0m [91m                    ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m974[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; status: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; status: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate

    [7m974[0m       const result = await service.performContinuousClose(period);
    [7m   [0m [91m                                                          ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m976[0m:[93m21[0m - [91merror[0m[90m TS2339: [0mProperty 'periodStatus' does not exist on type 'ClosingResult'.

    [7m976[0m       expect(result.periodStatus).toBe('SOFT_CLOSE');
    [7m   [0m [91m                    ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m982[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'reopenPeriod' does not exist on type 'ContinuousClosingService'.

    [7m982[0m       const reopenResult = await service.reopenPeriod(period);
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m989[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'reopenPeriod' does not exist on type 'ContinuousClosingService'.

    [7m989[0m       await expect(service.reopenPeriod(period)).rejects.toThrow(
    [7m   [0m [91m                           ~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1047[0m:[93m62[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m1047[0m         periods.map(period => service.performContinuousClose(period))
    [7m    [0m [91m                                                             ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1065[0m:[93m62[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ year: number; month: number; type: string; }' is not assignable to parameter of type 'ClosingPeriod'.
      Type '{ year: number; month: number; type: string; }' is missing the following properties from type 'ClosingPeriod': id, tenantId, startDate, endDate, status

    [7m1065[0m         periods.map(period => service.performContinuousClose(period))
    [7m    [0m [91m                                                             ~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1070[0m:[93m23[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksCompleted' does not exist on type 'ClosingResult'.

    [7m1070[0m         expect(result.tasksCompleted + result.tasksFailed + result.tasksSkipped).toBeGreaterThan(0);
    [7m    [0m [91m                      ~~~~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1070[0m:[93m47[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksFailed' does not exist on type 'ClosingResult'.

    [7m1070[0m         expect(result.tasksCompleted + result.tasksFailed + result.tasksSkipped).toBeGreaterThan(0);
    [7m    [0m [91m                                              ~~~~~~~~~~~[0m
    [96msrc/application/services/__tests__/performance-benchmarks.spec.ts[0m:[93m1070[0m:[93m68[0m - [91merror[0m[90m TS2339: [0mProperty 'tasksSkipped' does not exist on type 'ClosingResult'.

    [7m1070[0m         expect(result.tasksCompleted + result.tasksFailed + result.tasksSkipped).toBeGreaterThan(0);
    [7m    [0m [91m                                                                   ~~~~~~~~~~~~[0m

FAIL application/services/__tests__/tax-calculation.service.spec.ts (18.162 s)
  ● TaxCalculationService › TDS Calculation › should apply 1.5x rate for vendors without TIN

    expect(received).toBe(expected) // Object.is equality

    Expected: 0.105
    Received: 0.10500000000000001

    [0m [90m  95 |[39m
     [90m  96 |[39m       expect(result[33m.[39mtaxAmount)[33m.[39mtoBe([35m1050[39m)[33m;[39m [90m// 7% * 1.5 = 10.5% of 10000[39m
    [31m[1m>[22m[39m[90m  97 |[39m       expect(result[33m.[39mtaxRate)[33m.[39mtoBe([35m0.105[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m  98 |[39m     })[33m;[39m
     [90m  99 |[39m
     [90m 100 |[39m     it([32m'should calculate TDS for supplier at 4%'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (application/services/__tests__/tax-calculation.service.spec.ts:97:30)

FAIL application/services/__tests__/load-testing.service.spec.ts (18.227 s)
  ● LoadTestingService › runLoadTests › should execute all load test scenarios

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runLoadTests › should fail if any scenario fails

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run concurrent users scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run API endpoints scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run database load scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run event processing scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run Bangladesh compliance scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run WebSocket connections scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run cache performance scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should run stress test scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › runSpecificScenario › should throw error for unknown scenario

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Private Helper Methods › should calculate percentiles correctly

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Private Helper Methods › should calculate average correctly

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Private Helper Methods › should format bytes correctly

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Private Helper Methods › should aggregate metrics from multiple scenarios

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Report Generation › should generate HTML report with results

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Report Generation › should save HTML report to file

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › K6 Script Execution › should execute K6 script successfully

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › K6 Script Execution › should handle K6 script execution errors

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › K6 Results Parsing › should parse K6 results successfully

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › K6 Results Parsing › should handle empty K6 results

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Scenario Configuration › should read configuration values

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

  ● LoadTestingService › Scenario Configuration › should use default values when config not found

    TypeError: Cannot set property existsSync of #<Object> which has only a getter

    [0m [90m 33 |[39m
     [90m 34 |[39m     [90m// Mock fs methods[39m
    [31m[1m>[22m[39m[90m 35 |[39m     (fs[33m.[39mexistsSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([36mtrue[39m)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 36 |[39m     (fs[33m.[39mmkdirSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 37 |[39m     (fs[33m.[39mwriteFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 38 |[39m     (fs[33m.[39mreadFileSync [36mas[39m jest[33m.[39m[33mMock[39m) [33m=[39m jest[33m.[39mfn()[33m.[39mmockReturnValue([32m'{}'[39m)[33m;[39m[0m

      at Object.<anonymous> (application/services/__tests__/load-testing.service.spec.ts:35:33)

FAIL application/services/__tests__/ocr-invoice-processor.service.spec.ts
  ● Test suite failed to run

    Could not locate the bindings file. Tried:
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\build\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\build\Debug\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\build\Release\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\out\Debug\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\Debug\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\out\Release\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\Release\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\build\default\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\compiled\22.17.0\win32\x64\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\addon-build\release\install-root\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\addon-build\debug\install-root\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\addon-build\default\install-root\webgl.node
     → C:\Users\riz\vextrus-erp\node_modules\.pnpm\gl@5.0.3\node_modules\gl\lib\binding\node-v127-win32-x64\webgl.node

    [0m [90m  6 |[39m [36mimport[39m [33m*[39m [36mas[39m path [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m [36mimport[39m [33m*[39m [36mas[39m brain [36mfrom[39m [32m'brain.js'[39m[33m;[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [36mimport[39m levenshtein [36mfrom[39m [32m'levenshtein'[39m[33m;[39m
     [90m 10 |[39m
     [90m 11 |[39m [36mexport[39m [36minterface[39m [33mExtractedInvoiceData[39m {[0m

      at bindings (../../../node_modules/.pnpm/bindings@1.5.0/node_modules/bindings/bindings.js:126:9)
      at Object.<anonymous> (../../../node_modules/.pnpm/gl@5.0.3/node_modules/gl/src/javascript/native-gl.js:1:40)
      at Object.<anonymous> (../../../node_modules/.pnpm/gl@5.0.3/node_modules/gl/src/javascript/webgl-rendering-context.js:4:58)
      at Object.<anonymous> (../../../node_modules/.pnpm/gl@5.0.3/node_modules/gl/src/javascript/node-index.js:3:48)
      at Object.<anonymous> (../../../node_modules/.pnpm/gl@5.0.3/node_modules/gl/index.js:4:20)
      at Object.<anonymous> (../../../node_modules/.pnpm/gpu.js@2.16.0/node_modules/gpu.js/src/backend/headless-gl/kernel.js:1:20)
      at Object.<anonymous> (../../../node_modules/.pnpm/gpu.js@2.16.0/node_modules/gpu.js/src/gpu.js:5:30)
      at Object.<anonymous> (../../../node_modules/.pnpm/gpu.js@2.16.0/node_modules/gpu.js/src/index.js:1:17)
      at Object.<anonymous> (../../../node_modules/.pnpm/brain.js@2.0.0-beta.24_gpu.js@2.16.0/node_modules/brain.js/dist/index.js:5:14)
      at Object.<anonymous> (application/services/ocr-invoice-processor.service.ts:8:1)
      at Object.<anonymous> (application/services/__tests__/ocr-invoice-processor.service.spec.ts:3:1)

FAIL application/services/__tests__/ai-reconciliation.service.spec.ts
  ● Test suite failed to run

    The Node.js native addon module (tfjs_binding.node) can not be found at path: C:\Users\riz\vextrus-erp\node_modules\.pnpm\@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5\node_modules\@tensorflow\tfjs-node\lib\napi-v8\tfjs_binding.node. 
    Please run command 'npm rebuild @tensorflow/tfjs-node --build-addon-from-source' to rebuild the native addon module. 
    If you have problem with building the addon module, please check https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md or file an issue.

    [0m [90m 1 |[39m [36mimport[39m { [33mInjectable[39m[33m,[39m [33mLogger[39m } [36mfrom[39m [32m'@nestjs/common'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 2 |[39m [36mimport[39m [33m*[39m [36mas[39m tf [36mfrom[39m [32m'@tensorflow/tfjs-node'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 3 |[39m [36mimport[39m [33m*[39m [36mas[39m fs [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m 4 |[39m [36mimport[39m [33m*[39m [36mas[39m path [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m 5 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m[0m

      at Object.<anonymous> (../../../node_modules/.pnpm/@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5/node_modules/@tensorflow/tfjs-node/dist/index.js:61:11)
      at Object.<anonymous> (application/services/ai-reconciliation.service.ts:2:1)
      at Object.<anonymous> (application/services/__tests__/ai-reconciliation.service.spec.ts:4:1)

FAIL application/services/__tests__/cash-flow-prediction.service.spec.ts
  ● Test suite failed to run

    The Node.js native addon module (tfjs_binding.node) can not be found at path: C:\Users\riz\vextrus-erp\node_modules\.pnpm\@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5\node_modules\@tensorflow\tfjs-node\lib\napi-v8\tfjs_binding.node. 
    Please run command 'npm rebuild @tensorflow/tfjs-node --build-addon-from-source' to rebuild the native addon module. 
    If you have problem with building the addon module, please check https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md or file an issue.

    [0m [90m 1 |[39m [36mimport[39m { [33mInjectable[39m[33m,[39m [33mLogger[39m } [36mfrom[39m [32m'@nestjs/common'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 2 |[39m [36mimport[39m [33m*[39m [36mas[39m tf [36mfrom[39m [32m'@tensorflow/tfjs-node'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 3 |[39m [36mimport[39m [33m*[39m [36mas[39m fs [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m 4 |[39m [36mimport[39m [33m*[39m [36mas[39m path [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m 5 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m[0m

      at Object.<anonymous> (../../../node_modules/.pnpm/@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5/node_modules/@tensorflow/tfjs-node/dist/index.js:61:11)
      at Object.<anonymous> (application/services/cash-flow-prediction.service.ts:2:1)
      at Object.<anonymous> (application/services/__tests__/cash-flow-prediction.service.spec.ts:4:1)

FAIL application/services/__tests__/ml-model-management.service.spec.ts
  ● Test suite failed to run

    The Node.js native addon module (tfjs_binding.node) can not be found at path: C:\Users\riz\vextrus-erp\node_modules\.pnpm\@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5\node_modules\@tensorflow\tfjs-node\lib\napi-v8\tfjs_binding.node. 
    Please run command 'npm rebuild @tensorflow/tfjs-node --build-addon-from-source' to rebuild the native addon module. 
    If you have problem with building the addon module, please check https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md or file an issue.

    [0m [90m 2 |[39m [36mimport[39m { [33mConfigService[39m } [36mfrom[39m [32m'@nestjs/config'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m [36mimport[39m [33m*[39m [36mas[39m tf [36mfrom[39m [32m'@tensorflow/tfjs-node'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m [36mimport[39m [33m*[39m [36mas[39m fs [36mfrom[39m [32m'fs/promises'[39m[33m;[39m
     [90m 6 |[39m [36mimport[39m [33m*[39m [36mas[39m path [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m 7 |[39m [36mimport[39m [33m*[39m [36mas[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m[0m

      at Object.<anonymous> (../../../node_modules/.pnpm/@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5/node_modules/@tensorflow/tfjs-node/dist/index.js:61:11)
      at Object.<anonymous> (application/services/ml-model-management.service.ts:4:1)
      at Object.<anonymous> (application/services/__tests__/ml-model-management.service.spec.ts:6:1)

FAIL application/services/__tests__/streaming-analytics.service.spec.ts
  ● Test suite failed to run

    The Node.js native addon module (tfjs_binding.node) can not be found at path: C:\Users\riz\vextrus-erp\node_modules\.pnpm\@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5\node_modules\@tensorflow\tfjs-node\lib\napi-v8\tfjs_binding.node. 
    Please run command 'npm rebuild @tensorflow/tfjs-node --build-addon-from-source' to rebuild the native addon module. 
    If you have problem with building the addon module, please check https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md or file an issue.

    [0m [90m 3 |[39m [36mimport[39m { [33mEventEmitter2[39m } [36mfrom[39m [32m'@nestjs/event-emitter'[39m[33m;[39m
     [90m 4 |[39m [36mimport[39m { [33mKafka[39m[33m,[39m [33mConsumer[39m[33m,[39m [33mProducer[39m[33m,[39m [33mEachMessagePayload[39m[33m,[39m [33mKafkaMessage[39m } [36mfrom[39m [32m'kafkajs'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 5 |[39m [36mimport[39m [33m*[39m [36mas[39m tf [36mfrom[39m [32m'@tensorflow/tfjs-node'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 6 |[39m [36mimport[39m { performance } [36mfrom[39m [32m'perf_hooks'[39m[33m;[39m
     [90m 7 |[39m
     [90m 8 |[39m [36minterface[39m [33mFinancialEvent[39m {[0m

      at Object.<anonymous> (../../../node_modules/.pnpm/@tensorflow+tfjs-node@4.22.0_seedrandom@3.0.5/node_modules/@tensorflow/tfjs-node/dist/index.js:61:11)
      at Object.<anonymous> (application/services/streaming-analytics.service.ts:5:1)
      at Object.<anonymous> (application/services/__tests__/streaming-analytics.service.spec.ts:4:1)

FAIL application/services/__tests__/migration.service.spec.ts (19.237 s)
  ● MigrationService › generateMigrationScripts › should generate all migration scripts

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should include finance schema creation

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should create all required tables

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should include Bangladesh-specific types

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should create necessary indexes

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › generateMigrationScripts › should implement Row Level Security

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › executeMigration › should execute migration successfully

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › executeMigration › should rollback on error

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › executeMigration › should support dry run mode

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › executeMigration › should skip validation when requested

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › validateMigration › should validate all tables exist

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › validateMigration › should detect missing required columns

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › validateMigration › should detect missing indexes

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › validateMigration › should detect RLS not enabled

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › getMigrationHistory › should retrieve migration history

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › getMigrationHistory › should handle empty migration history

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › getMigrationHistory › should handle query errors gracefully

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Migration Package › should calculate correct checksum

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Migration Package › should save migration package to file

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Seed Data Scripts › should include Bangladesh chart of accounts

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Seed Data Scripts › should set up parent-child account relationships

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Seed Data Scripts › should use correct tenant ID

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Rollback Scripts › should drop all objects in correct order

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Rollback Scripts › should include backup restoration logic

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Rollback Scripts › should record rollback in audit log

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Validation Scripts › should validate schemas exist

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Validation Scripts › should check minimum object counts

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Validation Scripts › should validate RLS is enabled

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

  ● MigrationService › Validation Scripts › should check journal entry balance

    Nest can't resolve dependencies of the MigrationService (?). Please make sure that the argument DataSource at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If DataSource is a provider, is it part of the current RootTestModule?
    - If DataSource is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing DataSource */ ]
      })

    [0m [90m 16 |[39m     } [36mas[39m unknown [36mas[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mConnection[39m[33m>[39m[33m;[39m
     [90m 17 |[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mconst[39m module[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 19 |[39m       providers[33m:[39m [
     [90m 20 |[39m         [33mMigrationService[39m[33m,[39m
     [90m 21 |[39m         {[0m

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:141:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@11.1.6_@nestjs+common@11.1.6_@nestjs+microservices@11.1.6_@nestjs+platform-expre_2f4sggn6zi7mph4xbbs4aep6vu/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@11.1.6_@nestjs+common@11.1.6_@nestjs+core@11.1.6_@nestjs+microservices@11.1.6_kujoxhxm5bocbja7r32dgj3h4q/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (application/services/__tests__/migration.service.spec.ts:18:35)

FAIL application/services/__tests__/kpi-calculation.service.spec.ts (19.472 s)
  ● KPICalculationService › calculateRealTimeKPIs › should use cached data when available and valid

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 358 |[39m
     [90m 359 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mconnection[33m.[39mquery(query[33m,[39m [tenantId])[33m;[39m
    [31m[1m>[22m[39m[90m 360 |[39m     [36mconst[39m data [33m=[39m result[[35m0[39m] [33m||[39m {}[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 361 |[39m
     [90m 362 |[39m     [36mreturn[39m {
     [90m 363 |[39m       currentRatio[33m:[39m data[33m.[39mcurrent_ratio [33m||[39m [35m0[39m[33m,[39m[0m

      at KPICalculationService.calculateFinancialHealthKPIs (application/services/kpi-calculation.service.ts:360:24)
          at async Promise.all (index 0)
      at KPICalculationService.calculateRealTimeKPIs (application/services/kpi-calculation.service.ts:234:9)
      at Object.<anonymous> (application/services/__tests__/kpi-calculation.service.spec.ts:165:22)

  ● KPICalculationService › generateSmartAlerts › should generate alerts for low liquidity

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 498 |[39m
     [90m 499 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mconnection[33m.[39mquery(query[33m,[39m [tenantId])[33m;[39m
    [31m[1m>[22m[39m[90m 500 |[39m     [36mconst[39m data [33m=[39m result[[35m0[39m] [33m||[39m {}[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 501 |[39m
     [90m 502 |[39m     [36mreturn[39m {
     [90m 503 |[39m       grossProfitMargin[33m:[39m data[33m.[39mgross_profit_margin [33m||[39m [35m0[39m[33m,[39m[0m

      at KPICalculationService.calculateProfitabilityKPIs (application/services/kpi-calculation.service.ts:500:24)
          at async Promise.all (index 3)
      at KPICalculationService.calculateRealTimeKPIs (application/services/kpi-calculation.service.ts:234:9)
      at KPICalculationService.generateSmartAlerts (application/services/kpi-calculation.service.ts:663:18)
      at Object.<anonymous> (application/services/__tests__/kpi-calculation.service.spec.ts:189:22)

FAIL application/services/__tests__/analytics-dashboard.service.spec.ts (19.571 s)
  ● AnalyticsDashboardService › getFinancialDashboard › should calculate dashboard data if not cached

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 591 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mconnection[33m.[39mquery(query[33m,[39m [tenantId[33m,[39m period[33m.[39m[36mfrom[39m[33m,[39m period[33m.[39mto])[33m;[39m
     [90m 592 |[39m
    [31m[1m>[22m[39m[90m 593 |[39m     [36mreturn[39m result[33m.[39mmap((row[33m:[39m any) [33m=>[39m ({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 594 |[39m       date[33m:[39m row[33m.[39mday[33m.[39mtoISOString()[33m.[39msplit([32m'T'[39m)[[35m0[39m][33m,[39m
     [90m 595 |[39m       amount[33m:[39m parseFloat(row[33m.[39mworking_capital)[33m,[39m
     [90m 596 |[39m     }))[33m;[39m[0m

      at AnalyticsDashboardService.calculateWorkingCapitalTrend (application/services/analytics-dashboard.service.ts:593:19)
      at AnalyticsDashboardService.getFinancialDashboard (application/services/analytics-dashboard.service.ts:206:16)
      at Object.<anonymous> (application/services/__tests__/analytics-dashboard.service.spec.ts:211:22)

  ● AnalyticsDashboardService › getFinancialDashboard › should support Bengali localization

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 252 |[39m       expect(result)[33m.[39mtoBeDefined()[33m;[39m
     [90m 253 |[39m       [90m// Bengali localization should be applied to charts[39m
    [31m[1m>[22m[39m[90m 254 |[39m       expect(bengaliService[33m.[39mformatCurrency)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 255 |[39m     })[33m;[39m
     [90m 256 |[39m
     [90m 257 |[39m     it([32m'should force refresh when requested'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (application/services/__tests__/analytics-dashboard.service.spec.ts:254:45)

  ● AnalyticsDashboardService › performance › should use parallel data fetching

    expect(received).toHaveBeenCalledTimes(expected)

    Matcher error: expected value must be a non-negative integer

    Expected has type:  object
    Expected has value: Any<Number>

    [0m [90m 327 |[39m
     [90m 328 |[39m       [90m// Verify multiple queries were initiated[39m
    [31m[1m>[22m[39m[90m 329 |[39m       expect(connection[33m.[39mquery)[33m.[39mtoHaveBeenCalledTimes(expect[33m.[39many([33mNumber[39m))[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 330 |[39m     })[33m;[39m
     [90m 331 |[39m   })[33m;[39m
     [90m 332 |[39m[0m

      at Object.<anonymous> (application/services/__tests__/analytics-dashboard.service.spec.ts:329:32)

  ● AnalyticsDashboardService › error handling › should continue without cache on Redis error

    Redis connection failed

    [0m [90m 347 |[39m
     [90m 348 |[39m     it([32m'should continue without cache on Redis error'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 349 |[39m       redisService[33m.[39m[36mget[39m[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Redis connection failed'[39m))[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 350 |[39m       connection[33m.[39mquery[33m.[39mmockResolvedValue([])[33m;[39m
     [90m 351 |[39m
     [90m 352 |[39m       [36mconst[39m period[33m:[39m [33mDateRange[39m [33m=[39m {[0m

      at Object.<anonymous> (application/services/__tests__/analytics-dashboard.service.spec.ts:349:42)

FAIL application/services/__tests__/deployment-preparation.service.spec.ts (19.625 s)
  ● DeploymentPreparationService › generateEnvironmentConfig › should save configuration to YAML file

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "config/production.yaml", Any<String>, "utf8"
    Received: "C:\\Users\\riz\\vextrus-erp\\services\\finance\\config\\production.yaml", "environment: production
    database:
      host: prod-db.vextrus.com
      port: 5432
      database: vextrus_finance
      username: finance_user
      password: secure_password
      ssl: true
      poolSize: 100
    redis:
      host: prod-redis.vextrus.com
      port: 6379
      password: redis_password
      cluster: true
    monitoring:
      enabled: true
      prometheus: http://prometheus.vextrus.com
      grafana: http://grafana.vextrus.com
      sentry:
        dsn: https://sentry.vextrus.com/dsn
        environment: production
    security:
      encryptionKey: 18b69230f5e91c54f41dc171e3bf1d4b9027191dfb2f5e6f4f8af5f7dc885b47
      jwtSecret: 161ed254b2d14ceb82ad79d34b1bc5a973879a7c514c963c97b4ff6a91d0b60d
      rateLimiting:
        enabled: true
        maxRequests: 100
        windowMs: 60000
    performance:
      caching: true
      compression: true
      clustering: true
      workers: 4
    ", "utf8"

    Number of calls: 1

    [0m [90m 214 |[39m       [36mawait[39m service[33m.[39mgenerateEnvironmentConfig([32m'production'[39m)[33m;[39m
     [90m 215 |[39m
    [31m[1m>[22m[39m[90m 216 |[39m       expect(mockWriteFile)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 217 |[39m         expect[33m.[39mstringContaining([32m'config/production.yaml'[39m)[33m,[39m
     [90m 218 |[39m         expect[33m.[39many([33mString[39m)[33m,[39m
     [90m 219 |[39m         [32m'utf8'[39m[33m,[39m[0m

      at Object.<anonymous> (application/services/__tests__/deployment-preparation.service.spec.ts:216:29)

  ● DeploymentPreparationService › createDeploymentChecklist › should save checklist to file

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "deployment/checklist.md", Any<String>, "utf8"
    Received: "C:\\Users\\riz\\vextrus-erp\\services\\finance\\deployment\\checklist.md", "
    # Finance Module Production Deployment Checklist

    ## Pre-Deployment (24 hours before)

    ### Infrastructure
    - [ ] Database server provisioned (PostgreSQL 14+)
    - [ ] Redis cluster configured (6.2+)
    - [ ] Load balancer configured
    - [ ] SSL certificates installed
    - [ ] DNS records updated
    - [ ] CDN configured for static assets

    ### Database
    - [ ] Production database created
    - [ ] User permissions configured
    - [ ] Connection pooling optimized
    - [ ] Backup strategy implemented
    - [ ] Replication configured
    - [ ] Monitoring enabled

    ### Security
    - [ ] Secrets management configured (HashiCorp Vault / AWS Secrets Manager)
    - [ ] Environment variables secured
    - [ ] API keys rotated
    - [ ] Rate limiting configured
    - [ ] WAF rules configured
    - [ ] Security headers implemented
    - [ ] CORS policy configured

    ### Monitoring
    - [ ] Prometheus configured
    - [ ] Grafana dashboards created
    - [ ] Sentry integration configured
    - [ ] Log aggregation configured (ELK/CloudWatch)
    - [ ] Alerts configured
    - [ ] Health check endpoints verified

    ## Deployment Day

    ### Pre-Deployment (2 hours before)
    - [ ] Full database backup taken
    - [ ] Configuration backup created
    - [ ] Rollback plan reviewed
    - [ ] Team notified
    - [ ] Maintenance window announced

    ### Deployment Steps

    #### 1. Database Migration (30 minutes)
    - [ ] Run pre-migration backup
    - [ ] Execute migration scripts
    - [ ] Verify schema changes
    - [ ] Run post-migration validation
    - [ ] Update indexes
    - [ ] Analyze tables

    #### 2. Application Deployment (45 minutes)
    - [ ] Deploy to staging environment
    - [ ] Run smoke tests on staging
    - [ ] Deploy to production (blue-green)
    - [ ] Verify service health
    - [ ] Run integration tests
    - [ ] Switch traffic to new version

    #### 3. Configuration (15 minutes)
    - [ ] Update environment variables
    - [ ] Verify API endpoints
    - [ ] Check Redis connectivity
    - [ ] Verify third-party integrations
    - [ ] Update feature flags

    #### 4. Validation (30 minutes)
    - [ ] Run health checks
    - [ ] Verify critical user flows
    - [ ] Check performance metrics
    - [ ] Review error logs
    - [ ] Test Bangladesh compliance features
    - [ ] Verify payment gateway integration

    ## Post-Deployment

    ### Immediate (First 2 hours)
    - [ ] Monitor error rates
    - [ ] Check response times
    - [ ] Review memory usage
    - [ ] Monitor CPU utilization
    - [ ] Check database connections
    - [ ] Review cache hit rates

    ### Day 1
    - [ ] Review performance metrics
    - [ ] Analyze user feedback
    - [ ] Check compliance reports
    - [ ] Review security logs
    - [ ] Update documentation
    - [ ] Conduct retrospective

    ### Week 1
    - [ ] Performance tuning based on metrics
    - [ ] Address any reported issues
    - [ ] Optimize slow queries
    - [ ] Review and adjust caching
    - [ ] Update monitoring thresholds
    - [ ] Plan next iteration

    ## Rollback Procedure

    If critical issues detected:

    1. **Immediate Actions** (5 minutes)
       - [ ] Switch traffic to previous version
       - [ ] Notify team of rollback
       - [ ] Preserve logs for analysis

    2. **Database Rollback** (if needed, 15 minutes)
       - [ ] Execute rollback scripts
       - [ ] Restore from backup if necessary
       - [ ] Verify data integrity

    3. **Post-Rollback** (30 minutes)
       - [ ] Verify system stability
       - [ ] Document issues
       - [ ] Plan remediation

    ## Emergency Contacts

    - **DevOps Lead**: [Contact]
    - **Database Admin**: [Contact]
    - **Security Team**: [Contact]
    - **Product Owner**: [Contact]
    - **On-Call Engineer**: [Contact]

    ## Key Metrics to Monitor

    - API Response Time: Target < 100ms
    - Database Query Time: Target < 50ms
    - Cache Hit Rate: Target > 80%
    - Error Rate: Target < 0.1%
    - Concurrent Users: Support 50,000+
    - Memory Usage: < 80% of allocated
    - CPU Usage: < 70% sustained

    ## Bangladesh-Specific Validations

    - [ ] TIN validation working (10-12 digits)
    - [ ] BIN validation working (9 digits)
    - [ ] NID validation working (10/13/17 digits)
    - [ ] Mobile format validation (01[3-9]XXXXXXXX)
    - [ ] VAT calculation accurate (15%)
    - [ ] Bengali language support functional
    - [ ] Fiscal year logic correct (July-June)

    ---
    Generated: 2025-10-24T06:15:00.175Z
    ", "utf8"

    Number of calls: 1

    [0m [90m 273 |[39m       [36mawait[39m service[33m.[39mcreateDeploymentChecklist()[33m;[39m
     [90m 274 |[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(mockWriteFile)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 276 |[39m         expect[33m.[39mstringContaining([32m'deployment/checklist.md'[39m)[33m,[39m
     [90m 277 |[39m         expect[33m.[39many([33mString[39m)[33m,[39m
     [90m 278 |[39m         [32m'utf8'[39m[33m,[39m[0m

      at Object.<anonymous> (application/services/__tests__/deployment-preparation.service.spec.ts:275:29)

  ● DeploymentPreparationService › createProductionDocumentation › should create comprehensive production documentation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "docs/PRODUCTION.md", StringContaining "Finance Module Production Documentation", "utf8"
    Received: "C:\\Users\\riz\\vextrus-erp\\services\\finance\\docs\\PRODUCTION.md", "
    # Finance Module Production Documentation

    ## Overview
    The Finance Module is a critical component of the Vextrus ERP system, handling all financial transactions, accounting, and compliance for Bangladesh enterprises.

    ## Architecture

    ### Components
    - **API Gateway**: NestJS-based REST/GraphQL APIs
    - **Database**: PostgreSQL 14+ with read replicas
    - **Cache**: Redis 6.2+ cluster
    - **Message Queue**: RabbitMQ for async processing
    - **Storage**: S3-compatible object storage for documents

    ### Technology Stack
    - Runtime: Node.js 18 LTS
    - Framework: NestJS 10
    - Database: PostgreSQL 14
    - Cache: Redis 6.2
    - Language: TypeScript 5
    - Testing: Jest + K6

    ## API Documentation

    ### Authentication
    All API requests require JWT authentication:
    ```
    Authorization: Bearer <token>
    ```

    ### Core Endpoints

    #### Accounts
    - GET /api/finance/accounts - List all accounts
    - POST /api/finance/accounts - Create account
    - GET /api/finance/accounts/:id - Get account details
    - PUT /api/finance/accounts/:id - Update account
    - DELETE /api/finance/accounts/:id - Delete account

    #### Transactions
    - GET /api/finance/transactions - List transactions
    - POST /api/finance/transactions - Create transaction
    - GET /api/finance/transactions/:id - Get transaction
    - POST /api/finance/transactions/:id/approve - Approve transaction
    - POST /api/finance/transactions/:id/reject - Reject transaction

    #### Invoices
    - GET /api/finance/invoices - List invoices
    - POST /api/finance/invoices - Create invoice
    - GET /api/finance/invoices/:id - Get invoice
    - PUT /api/finance/invoices/:id - Update invoice
    - POST /api/finance/invoices/:id/send - Send invoice
    - POST /api/finance/invoices/:id/payment - Record payment

    ## Configuration

    ### Environment Variables
    ```env
    # Database
    DATABASE_HOST=postgres.vextrus.com
    DATABASE_PORT=5432
    DATABASE_NAME=vextrus_finance
    DATABASE_USER=finance_user
    DATABASE_PASSWORD=<encrypted>

    # Redis
    REDIS_HOST=redis.vextrus.com
    REDIS_PORT=6379
    REDIS_PASSWORD=<encrypted>

    # Security
    JWT_SECRET=<encrypted>
    ENCRYPTION_KEY=<encrypted>

    # Bangladesh Compliance
    NBR_API_KEY=<encrypted>
    VAT_RATE=0.15
    FISCAL_YEAR_START=7
    ```

    ## Monitoring

    ### Health Checks
    - Primary: GET /health
    - Database: GET /health/db
    - Redis: GET /health/redis
    - Dependencies: GET /health/deps

    ### Metrics
    Prometheus metrics available at /metrics:
    - finance_api_requests_total
    - finance_api_request_duration_seconds
    - finance_transaction_total
    - finance_invoice_total
    - finance_database_connections
    - finance_cache_hit_rate

    ### Logging
    Structured JSON logs sent to:
    - CloudWatch (AWS)
    - ElasticSearch (on-premise)
    - Sentry (errors)

    Log levels:
    - ERROR: System errors requiring immediate attention
    - WARN: Potential issues or degraded performance
    - INFO: Normal operations and audit trail
    - DEBUG: Detailed debugging (disabled in production)

    ## Security

    ### Authentication & Authorization
    - JWT-based authentication
    - Role-based access control (RBAC)
    - Row-level security (RLS) for multi-tenancy
    - API key authentication for external systems

    ### Encryption
    - Data at rest: AES-256
    - Data in transit: TLS 1.3
    - Database: Transparent Data Encryption (TDE)
    - Backups: GPG encrypted

    ### Compliance
    - PCI DSS Level 2 compliant
    - Bangladesh Bank regulations
    - NBR tax compliance
    - GDPR data protection

    ## Performance

    ### SLA Targets
    - Availability: 99.9% uptime
    - API Response: < 100ms p95
    - Database Query: < 50ms p95
    - Throughput: 10,000 req/sec
    - Concurrent Users: 50,000+

    ### Optimization
    - Database connection pooling (100 connections)
    - Redis caching (5-minute TTL)
    - Query result caching
    - Materialized views for reports
    - Index optimization
    - Horizontal scaling support

    ## Disaster Recovery

    ### Backup Strategy
    - Full backup: Daily at 2 AM BDT
    - Incremental: Every 6 hours
    - Transaction logs: Continuous
    - Retention: 30 days
    - Off-site replication: AWS S3

    ### Recovery Procedures
    1. **Database Failure**
       - Failover to read replica (< 1 minute)
       - Promote replica to primary
       - Restore from backup if needed

    2. **Application Failure**
       - Auto-scaling triggers new instances
       - Load balancer health checks
       - Circuit breaker pattern

    3. **Complete Disaster**
       - Restore from off-site backups
       - RTO: 4 hours
       - RPO: 1 hour

    ## Troubleshooting

    ### Common Issues

    #### High Memory Usage
    ```bash
    # Check memory usage
    docker stats finance-module

    # Restart with increased memory
    docker-compose up -d --scale finance=2
    ```

    #### Slow Queries
    ```sql
    -- Find slow queries
    SELECT query, calls, mean_time
    FROM pg_stat_statements
    WHERE mean_time > 100
    ORDER BY mean_time DESC;

    -- Analyze query
    EXPLAIN ANALYZE <query>;
    ```

    #### Cache Issues
    ```bash
    # Check Redis status
    redis-cli ping

    # Clear cache
    redis-cli FLUSHDB
    ```

    ## Support

    ### Contacts
    - Engineering: engineering@vextrus.com
    - DevOps: devops@vextrus.com
    - Security: security@vextrus.com
    - On-call: +880-XXX-XXXX

    ### Resources
    - API Docs: https://api.vextrus.com/finance/docs
    - Monitoring: https://grafana.vextrus.com
    - Logs: https://logs.vextrus.com
    - Wiki: https://wiki.vextrus.com/finance

    ---
    Last Updated: 2025-10-24T06:15:00.185Z
    Version: 1.0.0
    ", "utf8"

    Number of calls: 1

    [0m [90m 390 |[39m       [36mawait[39m service[33m.[39mcreateProductionDocumentation()[33m;[39m
     [90m 391 |[39m
    [31m[1m>[22m[39m[90m 392 |[39m       expect(mockWriteFile)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 393 |[39m         expect[33m.[39mstringContaining([32m'docs/PRODUCTION.md'[39m)[33m,[39m
     [90m 394 |[39m         expect[33m.[39mstringContaining([32m'Finance Module Production Documentation'[39m)[33m,[39m
     [90m 395 |[39m         [32m'utf8'[39m[33m,[39m[0m

      at Object.<anonymous> (application/services/__tests__/deployment-preparation.service.spec.ts:392:29)

  ● DeploymentPreparationService › Health Checks › should validate required configuration

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 485 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m service[[32m'checkConfiguration'[39m]([32m'production'[39m)[33m;[39m
     [90m 486 |[39m
    [31m[1m>[22m[39m[90m 487 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 488 |[39m       expect(configService[33m.[39m[36mget[39m)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 489 |[39m     })[33m;[39m
     [90m 490 |[39m[0m

      at Object.<anonymous> (application/services/__tests__/deployment-preparation.service.spec.ts:487:22)


Test Suites: 16 failed, 10 passed, 26 total
Tests:       90 failed, 463 passed, 553 total
Snapshots:   0 total
Time:        21.642 s
Ran all test suites.
