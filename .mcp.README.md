# MCP Configuration Management

This directory contains a smart MCP server configuration system that minimizes context usage while allowing you to enable optional servers when needed.

## Overview

Your MCP configuration has been optimized from **16 servers ‚Üí 5 core servers**, reducing baseline context from **85% ‚Üí ~50-60%**.

## Configuration Files

### Core Configuration (Always Active)
- **`.mcp.json`** - Current active configuration
  - `filesystem` - File operations
  - `github` - Git/PR/Issues
  - `postgres` - Database queries
  - `serena` - Code intelligence
  - `sequential-thinking` - Deep reasoning

### Optional Profiles
- **`.mcp.optional-docs.json`** - Documentation tools (~8k tokens)
  - `context7` - Library docs lookup
  - `consult7` - AI code consultation

- **`.mcp.optional-database.json`** - Extra DB tools (~5k tokens)
  - `prisma-local` - Schema migrations
  - `sqlite` - SQLite queries

- **`.mcp.optional-testing.json`** - Browser automation (~6k tokens)
  - `playwright` - E2E testing

- **`.mcp.optional-research.json`** - Web research (~15k tokens)
  - `brave-search` - Web search
  - `brightdata` - Web scraping
  - `reddit` - Reddit API

### Backups
- **`.mcp.json.backup-full`** - Your original 16-server config
- **`.mcp.json.current-backup`** - Temporary backup during toggles

## Usage

### PowerShell (Windows)
```powershell
# Check current status
.\mcp-toggle.ps1 status

# List available profiles
.\mcp-toggle.ps1 list

# Enable a profile (adds servers to core)
.\mcp-toggle.ps1 enable docs
.\mcp-toggle.ps1 enable database
.\mcp-toggle.ps1 enable testing
.\mcp-toggle.ps1 enable research

# Enable ALL servers (back to 16)
.\mcp-toggle.ps1 enable full

# Disable all optional servers (back to core 5)
.\mcp-toggle.ps1 disable
```

### Bash (Git Bash / Linux)
```bash
# Check current status
./mcp-toggle.sh status

# Enable profiles
./mcp-toggle.sh enable docs
./mcp-toggle.sh enable database

# Disable extras
./mcp-toggle.sh disable
```

## When to Enable Each Profile

### `docs` - Enable when:
- Looking up framework documentation
- Need latest API references
- Consulting AI for code patterns

### `database` - Enable when:
- Running Prisma migrations
- Need SQLite for local testing
- Schema exploration needed

### `testing` - Enable when:
- Writing E2E tests
- Debugging browser interactions
- UI automation needed

### `research` - Enable when:
- Researching new libraries
- Need market/competitor data
- Scraping documentation

### `full` - Enable when:
- You need everything (rare)
- Testing all integrations
- Demo/presentation mode

## Important Notes

‚ö†Ô∏è **After toggling, you MUST restart Claude Code** for changes to take effect!

üí° **Best Practice**: Start each session with core config, enable profiles only when needed, disable when done.

üìä **Context Savings**:
- Core only: ~50-60% baseline
- Core + docs: ~60-65% baseline
- Core + all optional: ~75-80% baseline
- Full (16 servers): ~85% baseline

## Workflow Examples

### Daily ERP Development
```powershell
# Morning - start with minimal
.\mcp-toggle.ps1 disable
# Restart Claude Code
# Work on backend features...

# Afternoon - need to research a library
.\mcp-toggle.ps1 enable docs
# Restart Claude Code
# Look up Next.js docs...

# Evening - back to minimal
.\mcp-toggle.ps1 disable
```

### Database Migration Day
```powershell
.\mcp-toggle.ps1 enable database
# Restart Claude Code
# Run migrations, test schemas...
.\mcp-toggle.ps1 disable
```

### Frontend Testing Session
```powershell
.\mcp-toggle.ps1 enable testing
# Restart Claude Code
# Write Playwright tests...
.\mcp-toggle.ps1 disable
```

## Troubleshooting

### "jq: command not found" (Bash script)
Install jq: `choco install jq` (Windows) or `apt-get install jq` (Linux)

### Servers not changing after toggle
You forgot to restart Claude Code! Changes only take effect on restart.

### Want to restore original config
```powershell
Copy-Item .mcp.json.backup-full .mcp.json -Force
```

### Need to add a new optional server
1. Add it to appropriate `.mcp.optional-*.json` file
2. Or create a new optional profile file
3. Update toggle scripts if needed

## Context Monitoring

Check context usage anytime:
```
/context
```

Watch the MCP tools line - it should show ~25-30k tokens with core config vs ~93k with full config.

---

**Remember**: Less is more! Keep it minimal, toggle when needed, enjoy the extra context space! üöÄ
